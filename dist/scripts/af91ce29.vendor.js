!function(a,b,c){"undefined"!=typeof module?module.exports=c(a,b):"function"==typeof define&&"object"==typeof define.amd?define(c):b[a]=c(a,b)}("bean",this,function(a,b){var c=window,d=b[a],e=/over|out/,f=/[^\.]*(?=\..*)\.|.*/,g=/\..*/,h="addEventListener",i="attachEvent",j="removeEventListener",k="detachEvent",l=document||{},m=l.documentElement||{},n=m[h],o=n?h:i,p=Array.prototype.slice,q=/click|mouse|menu|drag|drop/i,r=/^touch|^gesture/i,s={one:1},t=function(a,b,c){for(c=0;c<b.length;c++)a[b[c]]=1;return a}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(n?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),u=function(){function a(a,b){for(;null!==(b=b.parentNode);)if(b===a)return!0;return!1}function b(b){var c=b.relatedTarget;return c?c!==this&&"xul"!==c.prefix&&!/document/.test(this.toString())&&!a(this,c):null===c}return{mouseenter:{base:"mouseover",condition:b},mouseleave:{base:"mouseout",condition:b},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),v=function(){var a="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),b=a.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),c=a.concat("char charCode key keyCode".split(" ")),d=a.concat("touches targetTouches changedTouches scale rotation".split(" ")),f="preventDefault",g=function(a){return function(){a[f]?a[f]():a.returnValue=!1}},h="stopPropagation",i=function(a){return function(){a[h]?a[h]():a.cancelBubble=!0}},j=function(a){return function(){a[f](),a[h](),a.stopped=!0}},k=function(a,b,c){var d,e;for(d=c.length;d--;)e=c[d],!(e in b)&&e in a&&(b[e]=a[e])};return function(n,o){var p={originalEvent:n,isNative:o};if(!n)return p;var s,t=n.type,u=n.target||n.srcElement;return p[f]=g(n),p[h]=i(n),p.stop=j(p),p.target=u&&3===u.nodeType?u.parentNode:u,o&&(-1!==t.indexOf("key")?(s=c,p.keyCode=n.which||n.keyCode):q.test(t)?(s=b,p.rightClick=3===n.which||2===n.button,p.pos={x:0,y:0},n.pageX||n.pageY?(p.clientX=n.pageX,p.clientY=n.pageY):(n.clientX||n.clientY)&&(p.clientX=n.clientX+l.body.scrollLeft+m.scrollLeft,p.clientY=n.clientY+l.body.scrollTop+m.scrollTop),e.test(t)&&(p.relatedTarget=n.relatedTarget||n[("mouseover"===t?"from":"to")+"Element"])):r.test(t)&&(s=d),k(n,p,s||a)),p}}(),w=function(a,b){return n||b||a!==l&&a!==c?a:m},x=function(){function a(a,b,c,d,e){this.element=a,this.type=b,this.handler=c,this.original=d,this.namespaces=e,this.custom=u[b],this.isNative=t[b]&&a[o],this.eventType=n||this.isNative?b:"propertychange",this.customType=!n&&!this.isNative&&b,this.target=w(a,this.isNative),this.eventSupport=this.target[o]}return a.prototype={inNamespaces:function(a){var b,c;if(!a)return!0;if(!this.namespaces)return!1;for(b=a.length;b--;)for(c=this.namespaces.length;c--;)if(a[b]===this.namespaces[c])return!0;return!1},matches:function(a,b,c){return!(this.element!==a||b&&this.original!==b||c&&this.handler!==c)}},a}(),y=function(){var a={},b=function(c,d,e,f,g){if(d&&"*"!==d){var h,i=0,j=a["$"+d],k="*"===c;if(!j)return;for(h=j.length;h>i;i++)if((k||j[i].matches(c,e,f))&&!g(j[i],j,i,d))return}else for(var l in a)"$"===l.charAt(0)&&b(c,l.substr(1),e,f,g)},c=function(b,c,d){var e,f=a["$"+c];if(f)for(e=f.length;e--;)if(f[e].matches(b,d,null))return!0;return!1},d=function(a,c,d){var e=[];return b(a,c,d,null,function(a){return e.push(a)}),e},e=function(b){return(a["$"+b.type]||(a["$"+b.type]=[])).push(b),b},f=function(c){b(c.element,c.type,null,c.handler,function(b,c,d){return c.splice(d,1),0===c.length&&delete a["$"+b.type],!1})},g=function(){var b,c=[];for(b in a)"$"===b.charAt(0)&&(c=c.concat(a[b]));return c};return{has:c,get:d,put:e,del:f,entries:g}}(),z=n?function(a,b,c,d){a[d?h:j](b,c,!1)}:function(a,b,c,d,e){e&&d&&null===a["_on"+e]&&(a["_on"+e]=0),a[d?i:k]("on"+b,c)},A=function(a,b,d){return function(e){return e=v(e||((this.ownerDocument||this.document||this).parentWindow||c).event,!0),b.apply(a,[e].concat(d))}},B=function(a,b,d,e,f,g){return function(h){(e?e.apply(this,arguments):n?!0:h&&h.propertyName==="_on"+d||!h)&&(h&&(h=v(h||((this.ownerDocument||this.document||this).parentWindow||c).event,g)),b.apply(a,!h||f&&0!==f.length?p.call(arguments,h?0:1).concat(f):arguments))}},C=function(a,b,c,d,e){return function(){a(b,c,e),d.apply(this,arguments)}},D=function(a,b,c,d){var e,f,h,i=b&&b.replace(g,""),j=y.get(a,i,c);for(e=0,f=j.length;f>e;e++)j[e].inNamespaces(d)&&((h=j[e]).eventSupport&&z(h.target,h.eventType,h.handler,!1,h.type),y.del(h))},E=function(a,b,c,d,e){var h,i=b.replace(g,""),j=b.replace(f,"").split(".");return y.has(a,i,c)?a:("unload"===i&&(c=C(D,a,i,c,d)),u[i]&&(u[i].condition&&(c=B(a,c,i,u[i].condition,!0)),i=u[i].base||i),h=y.put(new x(a,i,c,d,j[0]&&j)),h.handler=h.isNative?A(a,h.handler,e):B(a,h.handler,i,!1,e,!1),h.eventSupport&&z(h.target,h.eventType,h.handler,!0,h.customType),void 0)},F=function(a,b,c){return function(d){var e,f,g="string"==typeof a?c(a,this):a;for(e=d.target;e&&e!==this;e=e.parentNode)for(f=g.length;f--;)if(g[f]===e)return b.apply(e,arguments)}},G=function(a,b,c){var d,e,h,i,j=D,k=b&&"string"==typeof b;if(k&&b.indexOf(" ")>0){for(b=b.split(" "),i=b.length;i--;)G(a,b[i],c);return a}if(e=k&&b.replace(g,""),e&&u[e]&&(e=u[e].type),!b||k)(h=k&&b.replace(f,""))&&(h=h.split(".")),j(a,e,c,h);else if("function"==typeof b)j(a,null,b);else for(d in b)b.hasOwnProperty(d)&&G(a,d,b[d]);return a},H=function(a,b,c,d,e){var f,g,h,i,j=c,k=c&&"string"==typeof c;if(b&&!c&&"object"==typeof b)for(f in b)b.hasOwnProperty(f)&&H.apply(this,[a,f,b[f]]);else for(i=arguments.length>3?p.call(arguments,3):[],g=(k?c:b).split(" "),k&&(c=F(b,j=d,e))&&(i=p.call(i,1)),this===s&&(c=C(G,a,b,c,j)),h=g.length;h--;)E(a,g[h],c,j,i);return a},I=function(){return H.apply(s,arguments)},J=n?function(a,b,d){var e=l.createEvent(a?"HTMLEvents":"UIEvents");e[a?"initEvent":"initUIEvent"](b,!0,!0,c,1),d.dispatchEvent(e)}:function(a,b,c){c=w(c,a),a?c.fireEvent("on"+b,l.createEventObject()):c["_on"+b]++},K=function(a,b,c){var d,e,h,i,j,k=b.split(" ");for(d=k.length;d--;)if(b=k[d].replace(g,""),(i=k[d].replace(f,""))&&(i=i.split(".")),i||c||!a[o])for(j=y.get(a,b),c=[!1].concat(c),e=0,h=j.length;h>e;e++)j[e].inNamespaces(i)&&j[e].handler.apply(a,c);else J(t[b],b,a);return a},L=function(a,b,c){for(var d=0,e=y.get(b,c),f=e.length;f>d;d++)e[d].original&&H(a,e[d].type,e[d].original);return a},M={add:H,one:I,remove:G,clone:L,fire:K,noConflict:function(){return b[a]=d,this}};if(c[i]){var N=function(){var a,b=y.entries();for(a in b)b[a].type&&"unload"!==b[a].type&&G(b[a].element,b[a].type);c[k]("onunload",N),c.CollectGarbage&&c.CollectGarbage()};c[i]("onunload",N)}return M}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new B(a)};"undefined"!=typeof module&&module.exports?(module.exports=w,w._=w):a._=w,w.VERSION="1.1.7";var x=w.each=w.forEach=function(a,b,d){if(null!=a)if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(j.call(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=function(a,b,c){var d=[];return null==a?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=void 0!==c;if(null==a&&(a=[]),m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){if(null==a&&(a=[]),n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),void 0!==c?a.reduceRight(b,c):a.reduceRight(b);var e=(w.isArray(a)?a.slice():w.toArray(a)).reverse();return w.reduce(e,b,c,d)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},w.filter=w.select=function(a,b,c){var d=[];return null==a?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return null==a?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return null==a?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),e)};var y=w.some=w.any=function(a,b,d){b=b||w.identity;var e=!1;return null==a?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){return(e|=b.call(d,a,f,g))?c:void 0}),!!e)};w.include=w.contains=function(a,b){var c=!1;return null==a?c:r&&a.indexOf===r?-1!=a.indexOf(b):(y(a,function(a){return(c=a===b)?!0:void 0}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);var d={computed:-1/0};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);var d={computed:1/0};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={};return x(a,function(a,d){var e=b(a,d);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);for(var d=0,e=a.length;e>d;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return null==b||c?a[0]:g.call(a,0,b)},w.rest=w.tail=function(a,b,c){return g.call(a,null==b||c?1:b)},w.last=function(a){return a[a.length-1]},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a){return w.reduce(a,function(a,b){return w.isArray(b)?a.concat(w.flatten(b)):(a[a.length]=b,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b){return w.reduce(a,function(a,c,d){return 0!=d&&(b===!0?w.last(a)==c:w.include(a,c))||(a[a.length]=c),a},[])},w.union=function(){return w.uniq(w.flatten(arguments))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a,b){return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){for(var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(null==a)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;e>d;d++)if(a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(null==a)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},w.bind=function(a,b){if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return 0==b.length&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return j.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))};var z=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d),(c||!d)&&(d=setTimeout(g,b))}};w.throttle=function(a,b){return z(a,b,!1)},w.debounce=function(a,b){return z(a,b,!0)},w.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}},w.compose=function(){var a=g.call(arguments);return function(){for(var b=g.call(arguments),c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)j.call(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},w.clone=function(a){return w.isArray(a)?a.slice():w.extend({},a)},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;if(a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped),a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(w.isDate(a)&&w.isDate(b))return a.getTime()===b.getTime();if(w.isNaN(a)&&w.isNaN(b))return!1;if(w.isRegExp(a)&&w.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if("object"!==c)return!1;if(a.length&&a.length!==b.length)return!1;var e=w.keys(a),f=w.keys(b);if(e.length!=f.length)return!1;for(var g in a)if(!(g in b&&w.isEqual(a[g],b[g])))return!1;return!0},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return 0===a.length;for(var b in a)if(j.call(a,b))return!1;return!0},w.isElement=function(a){return!!a&&1==a.nodeType},w.isArray=t||function(a){return"[object Array]"===i.call(a)},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return!!a&&!!j.call(a,"callee")},w.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},w.isString=function(a){return!!(""===a||a&&a.charCodeAt&&a.substr)},w.isNumber=function(a){return!!(0===a||a&&a.toExponential&&a.toFixed)},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1},w.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},w.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},w.isNull=function(a){return null===a},w.isUndefined=function(a){return void 0===a},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;a>d;d++)b.call(c,d)},w.mixin=function(a){x(w.functions(a),function(b){D(b,w[b]=a[b])})};var A=0;w.uniqueId=function(a){var b=A++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj",d);return b?e(b):e};var B=function(a){this._wrapped=a};w.prototype=B.prototype;var C=function(a,b){return b?w(a).chain():a},D=function(a,b){B.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),C(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];B.prototype[a]=function(){return b.apply(this._wrapped,arguments),C(this._wrapped,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];B.prototype[a]=function(){return C(b.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}(),function(){var a,b=this,c=this.Flotr;a={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(b,c){a.graphTypes[b]=c,a.defaultOptions[b]=c.options||{},a.defaultOptions.defaultType=a.defaultOptions.defaultType||b},addPlugin:function(b,c){a.plugins[b]=c,a.defaultOptions[b]=c.options||{}},draw:function(b,c,d,e){return new(e=e||a.Graph)(b,c,d)},merge:function(b,c){var d,e,f=c||{};for(d in b)e=b[d],f[d]=e&&"object"==typeof e?e.constructor===Array?this._.clone(e):e.constructor===RegExp||this._.isElement(e)||e.jquery?e:a.merge(e,c?c[d]:void 0):e;return f},clone:function(b){return a.merge(b,{})},getTickSize:function(b,c,d,e){var f=(d-c)/b,g=a.getMagnitude(f),h=10,i=f/g;return 1.5>i?h=1:2.25>i?h=2:3>i?h=0===e?2:2.5:7.5>i&&(h=5),h*g},defaultTickFormatter:function(a){return a+""},defaultTrackFormatter:function(a){return"("+a.x+", "+a.y+")"},engineeringNotation:function(a,b,c){var d=["Y","Z","E","P","T","G","M","k",""],e=["y","z","a","f","p","n","Âµ","m",""],f=d.length;if(c=c||1e3,b=Math.pow(10,b||2),0===a)return 0;if(a>1)for(;f--&&a>=c;)a/=c;else for(d=e,f=d.length;f--&&1>a;)a*=c;return Math.round(a*b)/b+d[f]},getMagnitude:function(a){return Math.pow(10,Math.floor(Math.log(a)/Math.LN10))},toPixel:function(a){return Math.floor(a)+.5},toRad:function(a){return-a*(Math.PI/180)},floorInBase:function(a,b){return b*Math.floor(a/b)},drawText:function(b,c,d,e,f){return b.fillText?(f=this._.extend({size:a.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},f),b.save(),b.translate(d,e),b.rotate(f.angle),b.fillStyle=f.color,b.font=(f.weight>1?"bold ":"")+1.3*f.size+"px sans-serif",b.textAlign=f.textAlign,b.textBaseline=f.textBaseline,b.fillText(c,0,0),b.restore(),void 0):(b.drawText(c,d,e,f),void 0)},getBestTextAlign:function(b,c){return c=c||{textAlign:"center",textBaseline:"middle"},b+=a.getTextAngleFromAlign(c),Math.abs(Math.cos(b))>.01&&(c.textAlign=Math.cos(b)>0?"right":"left"),Math.abs(Math.sin(b))>.01&&(c.textBaseline=Math.sin(b)>0?"top":"bottom"),c},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(b){return a.alignTable[b.textAlign+" "+b.textBaseline]||0},noConflict:function(){return b.Flotr=c,this}},b.Flotr=a}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function a(){this.rgba=["r","g","b","a"];for(var a=4;-1<--a;)this[this.rgba[a]]=arguments[a]||(3==a?1:0);this.normalize()}var b=Flotr._,c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};a.prototype={scale:function(){for(var a=4;-1<--a;)b.isUndefined(arguments[a])||(this[this.rgba[a]]*=arguments[a]);return this.normalize()},alpha:function(a){return!b.isUndefined(a)&&!b.isNull(a)&&(this.a=a),this.normalize()},clone:function(){return new a(this.r,this.b,this.g,this.a)},limit:function(a,b,c){return Math.max(Math.min(a,c),b)},normalize:function(){var a=this.limit;return this.r=a(parseInt(this.r,10),0,255),this.g=a(parseInt(this.g,10),0,255),this.b=a(parseInt(this.b,10),0,255),this.a=a(this.a,0,1),this},distance:function(b){if(b){b=new a.parse(b);for(var c=0,d=3;-1<--d;)c+=Math.abs(this[this.rgba[d]]-b[this.rgba[d]]);return c}},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var a=1-(.299*this.r+.587*this.g+.114*this.b)/255;return.5>a?"#000000":"#ffffff"}},b.extend(a,{parse:function(b){if(b instanceof a)return b;var d;if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))return new a(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))return new a(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))return new a(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b))return new a(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))return new a(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b))return new a(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));var e=(b+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return"transparent"==e?new a(255,255,255,0):(d=c[e])?new a(d[0],d[1],d[2]):new a(0,0,0,0)},processColor:function(c,d){var e=d.opacity;if(!c)return"rgba(0, 0, 0, 0)";if(c instanceof a)return c.alpha(e).toString();if(b.isString(c))return a.parse(c).alpha(e).toString();var f=c.colors?c:{colors:c};if(!d.ctx)return b.isArray(f.colors)?a.parse(b.isArray(f.colors[0])?f.colors[0][1]:f.colors[0]).alpha(e).toString():"rgba(0, 0, 0, 0)";f=b.extend({start:"top",end:"bottom"},f),/top/i.test(f.start)&&(d.x1=0),/left/i.test(f.start)&&(d.y1=0),/bottom/i.test(f.end)&&(d.x2=0),/right/i.test(f.end)&&(d.y2=0);var g,h,i,j=d.ctx.createLinearGradient(d.x1,d.y1,d.x2,d.y2);for(g=0;g<f.colors.length;g++)h=f.colors[g],b.isArray(h)?(i=h[0],h=h[1]):i=g/(f.colors.length-1),j.addColorStop(i,a.parse(h).alpha(e));return j}}),Flotr.Color=a}(),Flotr.Date={set:function(a,b,c,d){c=c||"UTC",b="set"+("UTC"===c?"UTC":"")+b,a[b](d)},get:function(a,b,c){return c=c||"UTC",b="get"+("UTC"===c?"UTC":"")+b,a[b]()},format:function(a,b,c){function d(a){return a+="",1==a.length?"0"+a:a}if(a){for(var e,f=this.get,g={h:f(a,"Hours",c).toString(),H:d(f(a,"Hours",c)),M:d(f(a,"Minutes",c)),S:d(f(a,"Seconds",c)),s:f(a,"Milliseconds",c),d:f(a,"Date",c).toString(),m:(f(a,"Month",c)+1).toString(),y:f(a,"FullYear",c).toString(),b:Flotr.Date.monthNames[f(a,"Month",c)]},h=[],i=!1,j=0;j<b.length;++j)e=b.charAt(j),i?(h.push(g[e]||e),i=!1):"%"==e?i=!0:h.push(e);return h.join("")}},getFormat:function(a,b){var c=Flotr.Date.timeUnits;return a<c.second?"%h:%M:%S.%s":a<c.minute?"%h:%M:%S":a<c.day?b<2*c.day?"%h:%M":"%b %d %h:%M":a<c.month?"%b %d":a<c.year?b<c.year?"%b":"%b %y":"%y"},formatter:function(a,b){var c=b.options,d=Flotr.Date.timeUnits[c.timeUnit],e=new Date(a*d);if(b.options.timeFormat)return Flotr.Date.format(e,c.timeFormat,c.timeMode);var f=(b.max-b.min)*d,g=b.tickSize*Flotr.Date.timeUnits[b.tickUnit];return Flotr.Date.format(e,Flotr.Date.getFormat(g,f),c.timeMode)},generator:function(a){function b(a){f(r,a,k,Flotr.floorInBase(g(r,a,k),q))}var c,d,e,f=this.set,g=this.get,h=this.timeUnits,i=this.spec,j=a.options,k=j.timeMode,l=h[j.timeUnit],m=a.min*l,n=a.max*l,o=(n-m)/j.noTicks,p=[],q=a.tickSize;for(d=j.tickFormatter===Flotr.defaultTickFormatter?this.formatter:j.tickFormatter,e=0;e<i.length-1;++e){var r=i[e][0]*h[i[e][1]];if(o<(r+i[e+1][0]*h[i[e+1][1]])/2&&r>=q)break}q=i[e][0],c=i[e][1],"year"==c&&(q=Flotr.getTickSize(j.noTicks*h.year,m,n,0),.5==q&&(c="month",q=6)),a.tickUnit=c,a.tickSize=q;var s=q*h[c];switch(r=new Date(m),c){case"millisecond":b("Milliseconds");break;case"second":b("Seconds");break;case"minute":b("Minutes");break;case"hour":b("Hours");break;case"month":b("Month");break;case"year":b("FullYear")}s>=h.second&&f(r,"Milliseconds",k,0),s>=h.minute&&f(r,"Seconds",k,0),s>=h.hour&&f(r,"Minutes",k,0),s>=h.day&&f(r,"Hours",k,0),s>=4*h.day&&f(r,"Date",k,1),s>=h.year&&f(r,"Month",k,0);var t,u=0,v=0/0;do if(t=v,v=r.getTime(),p.push({v:v/l,label:d(v/l,a)}),"month"==c)if(1>q){f(r,"Date",k,1);var w=r.getTime();f(r,"Month",k,g(r,"Month",k)+1);var x=r.getTime();r.setTime(v+u*h.hour+(x-w)*q),u=g(r,"Hours",k),f(r,"Hours",k,0)}else f(r,"Month",k,g(r,"Month",k)+q);else"year"==c?f(r,"FullYear",k,g(r,"FullYear",k)+q):r.setTime(v+s);while(n>v&&v!=t);return p},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){function a(a){return a&&a.jquery?a[0]:a}var b=Flotr._;Flotr.DOM={addClass:function(c,d){c=a(c);var e=c.className?c.className:"";b.include(e.split(/\s+/g),d)||(c.className=(e?e+" ":"")+d)},create:function(a){return document.createElement(a)},node:function(a){var b,c=Flotr.DOM.create("div");return c.innerHTML=a,b=c.children[0],c.innerHTML="",b},empty:function(b){b=a(b),b.innerHTML=""},remove:function(b){b=a(b),b.parentNode.removeChild(b)},hide:function(b){b=a(b),Flotr.DOM.setStyles(b,{display:"none"})},insert:function(c,d){c=a(c),b.isString(d)?c.innerHTML+=d:b.isElement(d)&&c.appendChild(d)},opacity:function(b,c){b=a(b),b.style.opacity=c},position:function(b,c){return b=a(b),b.offsetParent?(c=this.position(b.offsetParent),c.left+=b.offsetLeft,c.top+=b.offsetTop,c):{left:b.offsetLeft||0,top:b.offsetTop||0}},removeClass:function(c,d){var e=c.className?c.className:"";c=a(c),c.className=b.filter(e.split(/\s+/g),function(a){return a!=d?!0:void 0}).join(" ")},setStyles:function(c,d){c=a(c),b.each(d,function(a,b){c.style[b]=a})},show:function(b){b=a(b),Flotr.DOM.setStyles(b,{display:""})},size:function(b){return b=a(b),{height:b.offsetHeight,width:b.offsetWidth}}}}(),function(){var a=Flotr,b=a.bean;a.EventAdapter={observe:function(a,c,d){return b.add(a,c,d),this},fire:function(a,c,d){return b.fire(a,c,d),"undefined"!=typeof Prototype&&Event.fire(a,c,d),this},stopObserving:function(a,c,d){return b.remove(a,c,d),this},eventPointer:function(b){if(!a._.isUndefined(b.touches)&&b.touches.length>0)return{x:b.touches[0].pageX,y:b.touches[0].pageY};if(!a._.isUndefined(b.changedTouches)&&b.changedTouches.length>0)return{x:b.changedTouches[0].pageX,y:b.changedTouches[0].pageY};if(b.pageX||b.pageY)return{x:b.pageX,y:b.pageY};if(b.clientX||b.clientY){var c=document,d=c.body,e=c.documentElement;return{x:b.clientX+d.scrollLeft+e.scrollLeft,y:b.clientY+d.scrollTop+e.scrollTop}}}}}(),function(){var a=Flotr,b=a.DOM,c=a._,d=function(a){this.o=a};d.prototype={dimensions:function(a,b,c,d){return a?this.o.html?this.html(a,this.o.element,c,d):this.canvas(a,b):{width:0,height:0}},canvas:function(b,c){if(this.o.textEnabled){c=c||{};var d,e=this.measureText(b,c),f=e.width,g=c.size||a.defaultOptions.fontSize,h=c.angle||0,i=Math.cos(h),j=Math.sin(h),k=2,l=6;return d={width:Math.abs(i*f)+Math.abs(j*g)+k,height:Math.abs(j*f)+Math.abs(i*g)+l}}},html:function(a,c,d,e){var f=b.create("div");return b.setStyles(f,{position:"absolute",top:"-10000px"}),b.insert(f,'<div style="'+d+'" class="'+e+' flotr-dummy-div">'+a+"</div>"),b.insert(this.o.element,f),b.size(f)},measureText:function(b,d){var e,f=this.o.ctx;return!f.fillText||a.isIphone&&f.measure?{width:f.measure(b,d)}:(d=c.extend({size:a.defaultOptions.fontSize,weight:1,angle:0},d),f.save(),f.font=(d.weight>1?"bold ":"")+1.3*d.size+"px sans-serif",e=f.measureText(b),f.restore(),e)}},Flotr.Text=d}(),function(){function a(){return c.observe.apply(this,arguments),this._handles.push(arguments),this}var b=Flotr.DOM,c=Flotr.EventAdapter,d=Flotr._,e=Flotr;Graph=function(a,b,f){this._setEl(a),this._initMembers(),this._initPlugins(),c.fire(this.el,"flotr:beforeinit",[this]),this.data=b,this.series=e.Series.getSeries(b),this._initOptions(f),this._initGraphTypes(),this._initCanvas(),this._text=new e.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),c.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(d.bind(function(){c.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){c.fire(this.el,"flotr:destroy"),d.each(this._handles,function(a){c.stopObserving.apply(this,a)}),this._handles=[],this.el.graph=null},observe:a,_observe:a,processColor:function(a,b){var c={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};
return d.extend(c,b),e.Color.processColor(a,c)},findDataRanges:function(){var a,b,c,f=this.axes;d.each(this.series,function(d){c=d.getRange(),c&&(a=d.xaxis,b=d.yaxis,a.datamin=Math.min(c.xmin,a.datamin),a.datamax=Math.max(c.xmax,a.datamax),b.datamin=Math.min(c.ymin,b.datamin),b.datamax=Math.max(c.ymax,b.datamax),a.used=a.used||c.xused,b.used=b.used||c.yused)},this),!f.x.used&&!f.x2.used&&(f.x.used=!0),!f.y.used&&!f.y2.used&&(f.y.used=!0),d.each(f,function(a){a.calculateRange()});var g=d.keys(e.graphTypes),h=!1;d.each(this.series,function(a){a.hide||(d.each(g,function(b){a[b]&&a[b].show&&(this.extendRange(b,a),h=!0)},this),h||this.extendRange(this.options.defaultType,a))},this)},extendRange:function(a,b){this[a].extendRange&&this[a].extendRange(b,b.data,b[a],this[a]),this[a].extendYRange&&this[a].extendYRange(b.yaxis,b.data,b[a],this[a]),this[a].extendXRange&&this[a].extendXRange(b.xaxis,b.data,b[a],this[a])},calculateSpacing:function(){var a,b,c=this.axes,e=this.options,f=this.series,g=e.grid.labelMargin,h=this._text,i=c.x,j=c.x2,k=c.y,l=c.y2,m=e.grid.outlineWidth;for(d.each(c,function(a){a.calculateTicks(),a.calculateTextDimensions(h,e)}),b=h.dimensions(e.title,{size:1.5*e.fontSize},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=b.height,b=h.dimensions(e.subtitle,{size:e.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=b.height,a=0;a<e.length;++a)f[a].points.show&&(m=Math.max(m,f[a].points.radius+f[a].points.lineWidth/2));var n=this.plotOffset;i.options.margin===!1?(n.bottom=0,n.top=0):i.options.margin===!0?(n.bottom+=(e.grid.circular?0:i.used&&i.options.showLabels?i.maxLabel.height+g:0)+(i.used&&i.options.title?i.titleSize.height+g:0)+m,n.top+=(e.grid.circular?0:j.used&&j.options.showLabels?j.maxLabel.height+g:0)+(j.used&&j.options.title?j.titleSize.height+g:0)+this.subtitleHeight+this.titleHeight+m):(n.bottom=i.options.margin,n.top=i.options.margin),k.options.margin===!1?(n.left=0,n.right=0):k.options.margin===!0?(n.left+=(e.grid.circular?0:k.used&&k.options.showLabels?k.maxLabel.width+g:0)+(k.used&&k.options.title?k.titleSize.width+g:0)+m,n.right+=(e.grid.circular?0:l.used&&l.options.showLabels?l.maxLabel.width+g:0)+(l.used&&l.options.title?l.titleSize.width+g:0)+m):(n.left=k.options.margin,n.right=k.options.margin),n.top=Math.floor(n.top),this.plotWidth=this.canvasWidth-n.left-n.right,this.plotHeight=this.canvasHeight-n.bottom-n.top,i.length=j.length=this.plotWidth,k.length=l.length=this.plotHeight,k.offset=l.offset=this.plotHeight,i.setScale(),j.setScale(),k.setScale(),l.setScale()},draw:function(a){var b,d=this.ctx;if(c.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(d.save(),d.translate(this.plotOffset.left,this.plotOffset.top),b=0;b<this.series.length;b++)this.series[b].hide||this.drawSeries(this.series[b]);d.restore(),this.clip()}c.fire(this.el,"flotr:afterdraw",[this.series,this]),a&&a()},drawSeries:function(a){function b(a,b){var c=this.getOptions(a,b);this[b].draw(c)}var c=!1;a=a||this.series,d.each(e.graphTypes,function(d,e){a[e]&&a[e].show&&this[e]&&(c=!0,b.call(this,a,e))},this),c||b.call(this,a,this.options.defaultType)},getOptions:function(a,b){var c=a[b],d=(this[b],a.xaxis),f=a.yaxis,g={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:a.data,color:a.color,shadowSize:a.shadowSize,xScale:d.d2p,yScale:f.d2p,xInverse:d.p2d,yInverse:f.p2d};return g=e.merge(c,g),g.fillStyle=this.processColor(c.fillColor||a.color,{opacity:c.fillOpacity}),g},getEventPosition:function(a){var d,e,f,g=document,h=g.body,i=g.documentElement,j=this.axes,k=this.plotOffset,l=this.lastMousePos,m=c.eventPointer(a),n=m.x-l.pageX,o=m.y-l.pageY;return"ontouchstart"in this.el?(d=b.position(this.overlay),e=m.x-d.left-k.left,f=m.y-d.top-k.top):(d=this.overlay.getBoundingClientRect(),e=a.clientX-d.left-k.left-h.scrollLeft-i.scrollLeft,f=a.clientY-d.top-k.top-h.scrollTop-i.scrollTop),{x:j.x.p2d(e),x2:j.x2.p2d(e),y:j.y.p2d(f),y2:j.y2.p2d(f),relX:e,relY:f,dX:n,dY:o,absX:m.x,absY:m.y,pageX:m.x,pageY:m.y}},clickHandler:function(a){return this.ignoreClick?(this.ignoreClick=!1,this.ignoreClick):(c.fire(this.el,"flotr:click",[this.getEventPosition(a),this]),void 0)},mouseMoveHandler:function(a){if(!this.mouseDownMoveHandler){var b=this.getEventPosition(a);c.fire(this.el,"flotr:mousemove",[a,b,this]),this.lastMousePos=b}},mouseDownHandler:function(a){this.mouseUpHandler||(this.mouseUpHandler=d.bind(function(a){c.stopObserving(document,"mouseup",this.mouseUpHandler),c.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,c.fire(this.el,"flotr:mouseup",[a,this])},this),this.mouseDownMoveHandler=d.bind(function(b){var d=this.getEventPosition(b);c.fire(this.el,"flotr:mousemove",[a,d,this]),this.lastMousePos=d},this),c.observe(document,"mouseup",this.mouseUpHandler),c.observe(document,"mousemove",this.mouseDownMoveHandler),c.fire(this.el,"flotr:mousedown",[a,this]),this.ignoreClick=!1)},drawTooltip:function(a,c,d,e){var f=this.getMouseTrack(),g="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",h=e.position,i=e.margin,j=this.plotOffset;null!==c&&null!==d?(e.relative?("n"==h.charAt(0)?g+="bottom:"+(i-j.top-d+this.canvasHeight)+"px;top:auto;":"s"==h.charAt(0)&&(g+="top:"+(i+j.top+d)+"px;bottom:auto;"),"e"==h.charAt(1)?g+="left:"+(i+j.left+c)+"px;right:auto;":"w"==h.charAt(1)&&(g+="right:"+(i-j.left-c+this.canvasWidth)+"px;left:auto;")):("n"==h.charAt(0)?g+="top:"+(i+j.top)+"px;bottom:auto;":"s"==h.charAt(0)&&(g+="bottom:"+(i+j.bottom)+"px;top:auto;"),"e"==h.charAt(1)?g+="right:"+(i+j.right)+"px;left:auto;":"w"==h.charAt(1)&&(g+="left:"+(i+j.left)+"px;right:auto;")),f.style.cssText=g,b.empty(f),b.insert(f,a),b.show(f)):b.hide(f)},clip:function(a){var b=this.plotOffset,c=this.canvasWidth,d=this.canvasHeight;if(a=a||this.ctx,e.isIE&&e.isIE<9&&!e.isFlashCanvas){if(a===this.octx)return;a.save(),a.fillStyle=this.processColor(this.options.ieBackgroundColor),a.fillRect(0,0,c,b.top),a.fillRect(0,0,b.left,d),a.fillRect(0,d-b.bottom,c,b.bottom),a.fillRect(c-b.right,0,b.right,d),a.restore()}else a.clearRect(0,0,c,b.top),a.clearRect(0,0,b.left,d),a.clearRect(0,d-b.bottom,c,b.bottom),a.clearRect(c-b.right,0,b.right,d)},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){d.each(e.graphTypes,function(a,b){this[b]=e.clone(a)},this)},_initEvents:function(){var a,b,e,f=this.el;"ontouchstart"in f?(a=d.bind(function(d){e=!0,c.stopObserving(document,"touchend",a),c.fire(f,"flotr:mouseup",[event,this]),this.multitouches=null,b||this.clickHandler(d)},this),this.observe(this.overlay,"touchstart",d.bind(function(d){b=!1,e=!1,this.ignoreClick=!1,d.touches&&d.touches.length>1&&(this.multitouches=d.touches),c.fire(f,"flotr:mousedown",[event,this]),this.observe(document,"touchend",a)},this)),this.observe(this.overlay,"touchmove",d.bind(function(a){var d=this.getEventPosition(a);this.options.preventDefault&&a.preventDefault(),b=!0,this.multitouches||a.touches&&a.touches.length>1?this.multitouches=a.touches:e||c.fire(f,"flotr:mousemove",[event,d,this]),this.lastMousePos=d},this))):this.observe(this.overlay,"mousedown",d.bind(this.mouseDownHandler,this)).observe(f,"mousemove",d.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",d.bind(this.clickHandler,this)).observe(f,"mouseout",function(a){c.fire(f,"flotr:mouseout",a)})},_initCanvas:function(){function a(a,c){return a||(a=b.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"==typeof a.getContext&&(FlashCanvas.initElement(a),this.isFlashCanvas=!0),a.className="flotr-"+c,a.style.cssText="position:absolute;left:0px;top:0px;",b.insert(h,a)),d.each(g,function(d,e){b.show(a),("canvas"!=c||a.getAttribute(e)!==d)&&(a.setAttribute(e,d*i.resolution),a.style[e]=d+"px")}),a.context_=null,a}function c(a){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(a);var b=a.getContext("2d");return window.G_vmlCanvasManager||b.scale(i.resolution,i.resolution),b}var e,f,g,h=this.el,i=this.options,j=h.children,k=[];for(f=j.length;f--;)e=j[f],this.canvas||"flotr-canvas"!==e.className?this.overlay||"flotr-overlay"!==e.className?k.push(e):this.overlay=e:this.canvas=e;for(f=k.length;f--;)h.removeChild(k[f]);if(b.setStyles(h,{position:"relative"}),g={},g.width=h.clientWidth,g.height=h.clientHeight,g.width<=0||g.height<=0||i.resolution<=0)throw"Invalid dimensions for plot, width = "+g.width+", height = "+g.height+", resolution = "+i.resolution;this.canvas=a(this.canvas,"canvas"),this.overlay=a(this.overlay,"overlay"),this.ctx=c(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=c(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=g.height,this.canvasWidth=g.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){d.each(e.plugins,function(a,b){d.each(a.callbacks,function(a,b){this.observe(this.el,b,d.bind(a,this))},this),this[b]=e.clone(a),d.each(this[b],function(a,c){d.isFunction(a)&&(this[b][c]=d.bind(a,this))},this)},this)},_initOptions:function(a){var b=e.clone(e.defaultOptions);b.x2axis=d.extend(d.clone(b.xaxis),b.x2axis),b.y2axis=d.extend(d.clone(b.yaxis),b.y2axis),this.options=e.merge(a||{},b),null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0),null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0),c.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=e.Axis.getAxes(this.options);var f,g,h,i,j=[],k=[],l=this.series.length,m=this.series.length,n=this.options.colors,o=[],p=0;for(g=m-1;g>-1;--g)f=this.series[g].color,f&&(--m,d.isNumber(f)?j.push(f):o.push(e.Color.parse(f)));for(g=j.length-1;g>-1;--g)m=Math.max(m,j[g]+1);for(g=0;k.length<m;){f=n.length==g?new e.Color(100,100,100):e.Color.parse(n[g]);var q=p%2==1?-1:1,r=1+q*Math.ceil(p/2)*.2;f.scale(r,r,r),k.push(f),++g>=n.length&&(g=0,++p)}for(g=0,h=0;l>g;++g){i=this.series[g],i.color?d.isNumber(i.color)&&(i.color=k[i.color].toString()):i.color=k[h++].toString(),i.xaxis||(i.xaxis=this.axes.x),1==i.xaxis?i.xaxis=this.axes.x:2==i.xaxis&&(i.xaxis=this.axes.x2),i.yaxis||(i.yaxis=this.axes.y),1==i.yaxis?i.yaxis=this.axes.y:2==i.yaxis&&(i.yaxis=this.axes.y2);for(var s in e.graphTypes)i[s]=d.extend(d.clone(this.options[s]),i[s]);i.mouse=d.extend(d.clone(this.options.mouse),i.mouse),d.isUndefined(i.shadowSize)&&(i.shadowSize=this.options.shadowSize)}},_setEl:function(a){if(!a)throw"The target container doesn't exist";if(a.graph instanceof Graph)a.graph.destroy();else if(!a.clientWidth)throw"The target container must be visible";a.graph=this,this.el=a}},Flotr.Graph=Graph}(),function(){function a(a){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,d.extend(this,a)}function b(a,b){return a=Math.log(Math.max(a,Number.MIN_VALUE)),b!==Math.E&&(a/=Math.log(b)),a}function c(a,b){return b===Math.E?Math.exp(a):Math.pow(b,a)}var d=Flotr._,e="logarithmic";a.prototype={setScale:function(){var a,d=this.length,f=this.max,g=this.min,h=this.offset,i=this.orientation,j=this.options,k=j.scaling===e;a=k?d/(b(f,j.base)-b(g,j.base)):d/(f-g),this.scale=a,k?(this.d2p=function(c){return h+i*(b(c,j.base)-b(g,j.base))*a},this.p2d=function(d){return c((h+i*d)/a+b(g,j.base),j.base)}):(this.d2p=function(b){return h+i*(b-g)*a},this.p2d=function(b){return(h+i*b)/a+g})},calculateTicks:function(){var a=this.options;this.ticks=[],this.minorTicks=[],a.ticks?(this._cleanUserTicks(a.ticks,this.ticks),this._cleanUserTicks(a.minorTicks||[],this.minorTicks)):"time"==a.mode?this._calculateTimeTicks():"logarithmic"===a.scaling?this._calculateLogTicks():this._calculateTicks(),d.each(this.ticks,function(a){a.label+=""}),d.each(this.minorTicks,function(a){a.label+=""})},calculateRange:function(){if(this.used){var a=this,b=a.options,c=null!==b.min?b.min:a.datamin,d=null!==b.max?b.max:a.datamax,e=b.autoscaleMargin;if("logarithmic"==b.scaling&&(0>=c&&(c=a.datamin),0>=d&&(d=c)),d==c){var f=d?.01:1;null===b.min&&(c-=f),null===b.max&&(d+=f)}if("logarithmic"===b.scaling){0>c&&(c=d/b.base);var g=Math.log(d);b.base!=Math.E&&(g/=Math.log(b.base)),g=Math.ceil(g);var h=Math.log(c);b.base!=Math.E&&(h/=Math.log(b.base)),h=Math.ceil(h),a.tickSize=Flotr.getTickSize(b.noTicks,h,g,null===b.tickDecimals?0:b.tickDecimals),null===b.minorTickFreq&&(b.minorTickFreq=g-h>10?0:g-h>5?2:5)}else a.tickSize=Flotr.getTickSize(b.noTicks,c,d,b.tickDecimals);a.min=c,a.max=d,null===b.min&&b.autoscale&&(a.min-=a.tickSize*e,a.min<0&&a.datamin>=0&&(a.min=0),a.min=a.tickSize*Math.floor(a.min/a.tickSize)),null===b.max&&b.autoscale&&(a.max+=a.tickSize*e,a.max>0&&a.datamax<=0&&a.datamax!=a.datamin&&(a.max=0),a.max=a.tickSize*Math.ceil(a.max/a.tickSize)),a.min==a.max&&(a.max=a.min+1)}},calculateTextDimensions:function(a,b){var c,d,e="";if(this.options.showLabels)for(d=0;d<this.ticks.length;++d)c=this.ticks[d].label.length,c>e.length&&(e=this.ticks[d].label);this.maxLabel=a.dimensions(e,{size:b.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=a.dimensions(this.options.title,{size:1.2*b.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(a,b){var c,e,f,g,h=this,i=this.options;for(d.isFunction(a)&&(a=a({min:h.min,max:h.max})),e=0;e<a.length;++e)g=a[e],"object"==typeof g?(c=g[0],f=g.length>1?g[1]:i.tickFormatter(c,{min:h.min,max:h.max})):(c=g,f=i.tickFormatter(c,{min:this.min,max:this.max})),b[e]={v:c,label:f}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var a,b,c=this,d=c.options,e=Math.log(c.max);d.base!=Math.E&&(e/=Math.log(d.base)),e=Math.ceil(e);var f=Math.log(c.min);for(d.base!=Math.E&&(f/=Math.log(d.base)),f=Math.ceil(f),i=f;e>i;i+=c.tickSize){b=d.base==Math.E?Math.exp(i):Math.pow(d.base,i);var g=b*(d.base==Math.E?Math.exp(c.tickSize):Math.pow(d.base,c.tickSize)),h=(g-b)/d.minorTickFreq;for(c.ticks.push({v:b,label:d.tickFormatter(b,{min:c.min,max:c.max})}),a=b+h;g>a;a+=h)c.minorTicks.push({v:a,label:d.tickFormatter(a,{min:c.min,max:c.max})})}b=d.base==Math.E?Math.exp(i):Math.pow(d.base,i),c.ticks.push({v:b,label:d.tickFormatter(b,{min:c.min,max:c.max})})},_calculateTicks:function(){var a,b,c,d,e,f,g=this,h=g.options,i=g.tickSize,j=g.min,k=g.max,l=i*Math.ceil(j/i);for(h.minorTickFreq&&(b=i/h.minorTickFreq),e=0;(c=d=l+e*i)<=k;++e)if(a=h.tickDecimals,null===a&&(a=1-Math.floor(Math.log(i)/Math.LN10)),0>a&&(a=0),c=c.toFixed(a),g.ticks.push({v:c,label:h.tickFormatter(c,{min:g.min,max:g.max})}),h.minorTickFreq)for(f=0;f<h.minorTickFreq&&k>e*i+f*b;++f)c=d+f*b,g.minorTicks.push({v:c,label:h.tickFormatter(c,{min:g.min,max:g.max})})}},d.extend(a,{getAxes:function(b){return{x:new a({options:b.xaxis,n:1,length:this.plotWidth}),x2:new a({options:b.x2axis,n:2,length:this.plotWidth}),y:new a({options:b.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new a({options:b.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=a}(),function(){function a(a){b.extend(this,a)}var b=Flotr._;a.prototype={getRange:function(){var a,b,c,d=this.data,e=d.length,f=Number.MAX_VALUE,g=Number.MAX_VALUE,h=-Number.MAX_VALUE,i=-Number.MAX_VALUE,j=!1,k=!1;if(0>e||this.hide)return!1;for(c=0;e>c;c++)a=d[c][0],b=d[c][1],null!==a&&(f>a&&(f=a,j=!0),a>h&&(h=a,j=!0)),null!==b&&(g>b&&(g=b,k=!0),b>i&&(i=b,k=!0));return{xmin:f,xmax:h,ymin:g,ymax:i,xused:j,yused:k}}},b.extend(a,{getSeries:function(c){return b.map(c,function(c){var d;return c.data?(d=new a,b.extend(d,c)):d=new a({data:c}),d})}}),Flotr.Series=a}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(a){var b,c=a.context,d=a.lineWidth,e=a.shadowSize;c.save(),c.lineJoin="round",e&&(c.lineWidth=e/2,b=d/2+c.lineWidth/2,c.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,b+e/2,!1),c.strokeStyle="rgba(0,0,0,0.2)",this.plot(a,b,!1)),c.lineWidth=d,c.strokeStyle=a.color,this.plot(a,0,!0),c.restore()},plot:function(a,b,c){function d(){!b&&a.fill&&w&&(e=o(w[0]),l.fillStyle=a.fillStyle,l.lineTo(f,v),l.lineTo(e,v),l.lineTo(e,p(w[1])),l.fill(),a.fillBorder&&l.stroke())}var e,f,g,h,i,j,k,l=a.context,m=a.width,n=a.height,o=a.xScale,p=a.yScale,q=a.data,r=a.stacked?this.stack:!1,s=q.length-1,t=null,u=null,v=p(0),w=null;if(!(1>s)){for(l.beginPath(),k=0;s>k;++k)null!==q[k][1]&&null!==q[k+1][1]?(e=o(q[k][0]),f=o(q[k+1][0]),null===w&&(w=q[k]),r?(i=r.values[q[k][0]]||0,j=r.values[q[k+1][0]]||r.values[q[k][0]]||0,g=p(q[k][1]+i),h=p(q[k+1][1]+j),c&&(r.values[q[k][0]]=q[k][1]+i,k==s-1&&(r.values[q[k+1][0]]=q[k+1][1]+j))):(g=p(q[k][1]),h=p(q[k+1][1])),g>n&&h>n||0>g&&0>h||0>e&&0>f||e>m&&f>m||((t!=e||u!=g+b)&&l.moveTo(e,g+b),t=f,u=h+b,a.steps?(l.lineTo(t+b/2,g+b),l.lineTo(t+b/2,u)):l.lineTo(t,u))):a.fill&&k>0&&q[k][1]&&(l.stroke(),d(),w=null,l.closePath(),l.beginPath());(!a.fill||a.fill&&!a.fillBorder)&&l.stroke(),d(),l.closePath()}},extendYRange:function(a,b,c,d){var e=a.options;if(c.stacked&&(!e.max&&0!==e.max||!e.min&&0!==e.min)){var f,g,h=a.max,i=a.min,j=d.positiveSums||{},k=d.negativeSums||{};for(g=0;g<b.length;g++)f=b[g][0]+"",b[g][1]>0?(j[f]=(j[f]||0)+b[g][1],h=Math.max(h,j[f])):(k[f]=(k[f]||0)+b[g][1],i=Math.min(i,k[f]));d.negativeSums=k,d.positiveSums=j,a.max=h,a.min=i}c.steps&&(this.hit=function(a){var b,c=a.data,d=a.args,e=a.yScale,f=d[0],g=c.length,h=d[1],i=a.xInverse(f.relX),j=f.relY;for(b=0;g-1>b;b++)if(i>=c[b][0]&&i<=c[b+1][0]){Math.abs(e(c[b][1])-j)<8&&(h.x=c[b][0],h.y=c[b][1],h.index=b,h.seriesIndex=a.index);break}},this.drawHit=function(a){var b,c=a.context,d=a.args,e=a.data,f=a.xScale,g=d.index,h=f(d.x),i=a.yScale(d.y);e.length-1>g&&(b=a.xScale(e[g+1][0]),c.save(),c.strokeStyle=a.color,c.lineWidth=a.lineWidth,c.beginPath(),c.moveTo(h,i),c.lineTo(b,i),c.stroke(),c.closePath(),c.restore())},this.clearHit=function(a){var b,c=a.context,d=a.args,e=a.data,f=a.xScale,g=a.lineWidth,h=d.index,i=f(d.x),j=a.yScale(d.y);e.length-1>h&&(b=a.xScale(e[h+1][0]),c.clearRect(i-g,j-g,b-i+2*g,2*g))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(a){var b=a.context;this.current+=1,b.save(),b.lineJoin="miter",b.lineWidth=a.lineWidth,b.strokeStyle=a.color,a.fill&&(b.fillStyle=a.fillStyle),this.plot(a),b.restore()},plot:function(a){var b,c,d,e,f,g,h=a.data,i=a.context,j=a.shadowSize;if(!(h.length<1))for(this.translate(i,a.horizontal),b=0;b<h.length;b++)c=this.getBarGeometry(h[b][0],h[b][1],a),null!==c&&(d=c.left,e=c.top,f=c.width,g=c.height,a.fill&&i.fillRect(d,e,f,g),j&&(i.save(),i.fillStyle="rgba(0,0,0,0.05)",i.fillRect(d+j,e+j,f,g),i.restore()),a.lineWidth&&i.strokeRect(d,e,f,g))},translate:function(a,b){b&&(a.rotate(-Math.PI/2),a.scale(-1,1))},getBarGeometry:function(a,b,c){var d,e,f,g,h,i=c.horizontal,j=c.barWidth,k=c.centered,l=c.stacked?this.stack:!1,m=c.lineWidth,n=k?j/2:0,o=i?c.yScale:c.xScale,p=i?c.xScale:c.yScale,q=i?b:a,r=i?a:b,s=0;return c.grouped&&(this.current/this.groups,q-=n,j/=this.groups,n=j/2,q=q+j*this.current-n),l&&(d=r>0?l.positive:l.negative,s=d[q]||s,d[q]=s+r),e=o(q-n),f=o(q+j-n),g=p(r+s),h=p(s),0>h&&(h=0),null===a||null===b?null:{x:q,y:r,xScale:o,yScale:p,top:g,left:Math.min(e,f)-m/2,width:Math.abs(f-e)-m,height:h-g}},hit:function(a){var b,c,d=a.data,e=a.args,f=e[0],g=e[1],h=a.xInverse(f.relX),i=a.yInverse(f.relY),j=this.getBarGeometry(h,i,a),k=j.width/2,l=j.left,m=j.y;for(c=d.length;c--;)b=this.getBarGeometry(d[c][0],d[c][1],a),(m>0&&m<b.y||0>m&&m>b.y)&&Math.abs(l-b.left)<k&&(g.x=d[c][0],g.y=d[c][1],g.index=c,g.seriesIndex=a.index)},drawHit:function(a){var b=a.context,c=a.args,d=this.getBarGeometry(c.x,c.y,a),e=d.left,f=d.top,g=d.width,h=d.height;b.save(),b.strokeStyle=a.color,b.lineWidth=a.lineWidth,this.translate(b,a.horizontal),b.beginPath(),b.moveTo(e,f+h),b.lineTo(e,f),b.lineTo(e+g,f),b.lineTo(e+g,f+h),a.fill&&(b.fillStyle=a.fillStyle,b.fill()),b.stroke(),b.closePath(),b.restore()},clearHit:function(a){var b=a.context,c=a.args,d=this.getBarGeometry(c.x,c.y,a),e=d.left,f=d.width,g=d.top,h=d.height,i=2*a.lineWidth;b.save(),this.translate(b,a.horizontal),b.clearRect(e-i,Math.min(g,g+h)-i,f+2*i,Math.abs(h)+2*i),b.restore()},extendXRange:function(a,b,c,d){this._extendRange(a,b,c,d),this.groups=this.groups+1||1,this.current=0},extendYRange:function(a,b,c,d){this._extendRange(a,b,c,d)},_extendRange:function(a,b,c){var d=a.options.max;if(!_.isNumber(d)&&!_.isString(d)){var e,f,g,h=a.min,i=a.max,j=c.horizontal,k=a.orientation,l=this.positiveSums||{},m=this.negativeSums||{};if((1==k&&!j||-1==k&&j)&&c.centered&&(i=Math.max(a.datamax+c.barWidth,i),h=Math.min(a.datamin-c.barWidth,h)),c.stacked&&(1==k&&j||-1==k&&!j))for(g=b.length;g--;)e=b[g][1==k?1:0]+"",f=b[g][1==k?0:1],f>0?(l[e]=(l[e]||0)+f,i=Math.max(i,l[e])):(m[e]=(m[e]||0)+f,h=Math.min(h,m[e]));(1==k&&j||-1==k&&!j)&&c.topPadding&&(a.max===a.datamax||c.stacked&&this.stackMax!==i)&&(i+=c.topPadding*(i-h)),this.stackMin=h,this.stackMax=i,this.negativeSums=m,this.positiveSums=l,a.max=i,a.min=h}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(a){var b=a.context,c=a.shadowSize;b.save(),b.lineWidth=a.lineWidth,b.fillStyle="rgba(0,0,0,0.05)",b.strokeStyle="rgba(0,0,0,0.05)",this.plot(a,c/2),b.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,c/4),b.strokeStyle=a.color,b.fillStyle=a.fillStyle,this.plot(a),b.restore()},plot:function(a,b){var c,d,e=a.data,f=a.context;for(b=b||0,d=0;d<e.length;++d)c=this.getGeometry(e[d],a),f.beginPath(),f.arc(c.x+b,c.y+b,c.z,0,2*Math.PI,!0),f.stroke(),a.fill&&f.fill(),f.closePath()},getGeometry:function(a,b){return{x:b.xScale(a[0]),y:b.yScale(a[1]),z:a[2]*b.baseRadius}},hit:function(a){var b,c,d,e,f=a.data,g=a.args,h=g[0],j=g[1],k=h.relX,l=h.relY;for(j.best=j.best||Number.MAX_VALUE,i=f.length;i--;)c=this.getGeometry(f[i],a),d=c.x-k,e=c.y-l,b=Math.sqrt(d*d+e*e),b<c.z&&c.z<j.best&&(j.x=f[i][0],j.y=f[i][1],j.index=i,j.seriesIndex=a.index,j.best=c.z)},drawHit:function(a){var b=a.context,c=this.getGeometry(a.data[a.args.index],a);b.save(),b.lineWidth=a.lineWidth,b.fillStyle=a.fillStyle,b.strokeStyle=a.color,b.beginPath(),b.arc(c.x,c.y,c.z,0,2*Math.PI,!0),b.fill(),b.stroke(),b.closePath(),b.restore()},clearHit:function(a){var b=a.context,c=this.getGeometry(a.data[a.args.index],a),d=c.z+a.lineWidth;b.save(),b.clearRect(c.x-d,c.y-d,2*d,2*d),b.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(a){var b=a.context;b.save(),b.lineJoin="miter",b.lineCap="butt",b.lineWidth=a.wickLineWidth||a.lineWidth,this.plot(a),b.restore()},plot:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=a.data,r=a.context,s=a.xScale,t=a.yScale,u=a.candleWidth/2,v=a.shadowSize,w=a.lineWidth,x=a.wickLineWidth,y=x%2/2;if(!(q.length<1))for(p=0;p<q.length;p++)c=q[p],d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=s(d-u),k=s(d+u),l=t(h),m=t(g),n=t(Math.min(f,i)),o=t(Math.max(f,i)),b=a[f>i?"downFillColor":"upFillColor"],a.fill&&!a.barcharts&&(r.fillStyle="rgba(0,0,0,0.05)",r.fillRect(j+v,o+v,k-j,n-o),r.save(),r.globalAlpha=a.fillOpacity,r.fillStyle=b,r.fillRect(j,o+w,k-j,n-o),r.restore()),(w||x)&&(d=Math.floor((j+k)/2)+y,r.strokeStyle=b,r.beginPath(),a.barcharts?(r.moveTo(d,Math.floor(m+u)),r.lineTo(d,Math.floor(l+u)),e=Math.floor(f+u)+.5,r.moveTo(Math.floor(j)+y,e),r.lineTo(d,e),e=Math.floor(i+u)+.5,r.moveTo(Math.floor(k)+y,e),r.lineTo(d,e)):(r.strokeRect(j,o+w,k-j,n-o),r.moveTo(d,Math.floor(o+w)),r.lineTo(d,Math.floor(m+w)),r.moveTo(d,Math.floor(n+w)),r.lineTo(d,Math.floor(l+w))),r.closePath(),r.stroke())},hit:function(a){var b,c,d,e,f,g,h,i,j=a.xScale,k=a.yScale,l=a.data,m=a.args,n=m[0],o=a.candleWidth/2,p=m[1],q=n.relX,r=n.relY,s=l.length;for(b=0;s>b;b++)if(c=l[b],d=c[2],e=c[3],f=j(c[0]-o),g=j(c[0]+o),i=k(e),h=k(d),q>f&&g>q&&r>h&&i>r)return p.x=c[0],p.index=b,p.seriesIndex=a.index,void 0},drawHit:function(a){var b=a.context;b.save(),this.plot(_.defaults({fill:!!a.fillColor,upFillColor:a.color,downFillColor:a.color,data:[a.data[a.args.index]]},a)),b.restore()},clearHit:function(a){var b=a.args,c=a.context,d=a.xScale,e=a.yScale,f=a.lineWidth,g=a.candleWidth/2,h=a.data[b.index],i=d(h[0]-g)-f,j=d(h[0]+g)+f,k=e(h[2]),l=e(h[3])+f;c.clearRect(i,k,j-i,l-k)},extendXRange:function(a){null===a.options.max&&(a.max=Math.max(a.datamax+.5,a.max),a.min=Math.min(a.datamin-.5,a.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(a){var b=this.ctx,c=a.gantt.barWidth,d=Math.min(a.gantt.lineWidth,c);if(b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="miter",b.lineWidth=d,b.strokeStyle=a.color,b.save(),this.gantt.plotShadows(a,c,0,a.gantt.fill),b.restore(),a.gantt.fill){var e=a.gantt.fillColor||a.color;b.fillStyle=this.processColor(e,{opacity:a.gantt.fillOpacity})}this.gantt.plot(a,c,0,a.gantt.fill),b.restore()},plot:function(a,b,c,d){var e=a.data;if(!(e.length<1)){var f,g=a.xaxis,h=a.yaxis,i=this.ctx;for(f=0;f<e.length;f++){var j=e[f][0],k=e[f][1],l=e[f][2],m=!0,n=!0,o=!0;if(null!==k&&null!==l){var p=k,q=k+l,r=j-(a.gantt.centered?b/2:0),s=j+b-(a.gantt.centered?b/2:0);q<g.min||p>g.max||s<h.min||r>h.max||(p<g.min&&(p=g.min,m=!1),q>g.max&&(q=g.max,g.lastSerie!=a&&(n=!1)),r<h.min&&(r=h.min),s>h.max&&(s=h.max,h.lastSerie!=a&&(n=!1)),d&&(i.beginPath(),i.moveTo(g.d2p(p),h.d2p(r)+c),i.lineTo(g.d2p(p),h.d2p(s)+c),i.lineTo(g.d2p(q),h.d2p(s)+c),i.lineTo(g.d2p(q),h.d2p(r)+c),i.fill(),i.closePath()),a.gantt.lineWidth&&(m||o||n)&&(i.beginPath(),i.moveTo(g.d2p(p),h.d2p(r)+c),i[m?"lineTo":"moveTo"](g.d2p(p),h.d2p(s)+c),i[n?"lineTo":"moveTo"](g.d2p(q),h.d2p(s)+c),i[o?"lineTo":"moveTo"](g.d2p(q),h.d2p(r)+c),i.stroke(),i.closePath()))}}}},plotShadows:function(a,b){var c=a.data;if(!(c.length<1)){var d,e,f,g,h=a.xaxis,i=a.yaxis,j=this.ctx,k=this.options.shadowSize;for(d=0;d<c.length;d++)if(e=c[d][0],f=c[d][1],g=c[d][2],null!==f&&null!==g){var l=f,m=f+g,n=e-(a.gantt.centered?b/2:0),o=e+b-(a.gantt.centered?b/2:0);if(!(m<h.min||l>h.max||o<i.min||n>i.max)){l<h.min&&(l=h.min),m>h.max&&(m=h.max),n<i.min&&(n=i.min),o>i.max&&(o=i.max);var p=h.d2p(m)-h.d2p(l)-(h.d2p(m)+k<=this.plotWidth?0:k),q=i.d2p(n)-i.d2p(o)-(i.d2p(n)+k<=this.plotHeight?0:k);j.fillStyle="rgba(0,0,0,0.05)",j.fillRect(Math.min(h.d2p(l)+k,this.plotWidth),Math.min(i.d2p(o)+k,this.plotHeight),p,q)}}}},extendXRange:function(a){if(null===a.options.max){var b,c,d,e,f=a.min,g=a.max,h={},i=null;for(b=0;b<this.series.length;++b)if(d=this.series[b],e=d.gantt,e.show&&d.xaxis==a){for(c=0;c<d.data.length;c++)e.show&&(y=d.data[c][0]+"",h[y]=Math.max(h[y]||0,d.data[c][1]+d.data[c][2]),i=d);for(c in h)g=Math.max(h[c],g)}a.lastSerie=i,a.max=g,a.min=f}},extendYRange:function(a){if(null===a.options.max){var b,c,d,e,f=Number.MIN_VALUE,g=Number.MAX_VALUE,h=null;for(b=0;b<this.series.length;++b)if(d=this.series[b],e=d.gantt,e.show&&!d.hide&&d.yaxis==a){var i=Number.MIN_VALUE,j=Number.MAX_VALUE;for(c=0;c<d.data.length;c++)i=Math.max(i,d.data[c][0]),j=Math.min(j,d.data[c][0]);e.centered?(f=Math.max(i+.5,f),g=Math.min(j-.5,g)):(f=Math.max(i+1,f),g=Math.min(j,g)),e.barWidth+i>f&&(f=a.max+e.barWidth)}a.lastSerie=h,a.max=f,a.min=g,a.tickSize=Flotr.getTickSize(a.options.noTicks,g,f,a.options.tickDecimals)}}}),function(){function a(a){return"object"==typeof a&&a.constructor&&(Image?!0:a.constructor===Image)}Flotr.defaultMarkerFormatter=function(a){return Math.round(100*a.y)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(a){function b(a,b){return d=l.negative[a]||0,c=l.positive[a]||0,b>0?(l.positive[a]=d+b,d+b):(l.negative[a]=c+b,c+b)}var c,d,e,f,g,h,i,j=a.data,k=a.context,l=a.stacked?a.stack:!1,m=a.stackingType;for(k.save(),k.lineJoin="round",k.lineWidth=a.lineWidth,k.strokeStyle="rgba(0,0,0,0.5)",k.fillStyle=a.fillStyle,f=0;f<j.length;++f)g=j[f][0],h=j[f][1],l&&("b"==m?a.horizontal?h=b(h,g):g=b(g,h):"a"==m&&(e=l.values[g]||0,l.values[g]=e+h,h=e+h)),i=a.labelFormatter({x:g,y:h,index:f,data:j}),this.plot(a.xScale(g),a.yScale(h),i,a);k.restore()},plot:function(b,c,d,e){e.context;if(a(d)&&!d.complete)throw"Marker image not loaded.";this._plot(b,c,d,e)},_plot:function(b,c,d,e){var f,g=e.context,h=2,i=b,j=c;f=a(d)?{height:d.height,width:d.width}:e.text.canvas(d),f.width=Math.floor(f.width+2*h),f.height=Math.floor(f.height+2*h),-1!=e.position.indexOf("c")?i-=f.width/2+h:-1!=e.position.indexOf("l")&&(i-=f.width),-1!=e.position.indexOf("m")?j-=f.height/2+h:-1!=e.position.indexOf("t")?j-=f.height+e.verticalMargin:j+=e.verticalMargin,i=Math.floor(i)+.5,j=Math.floor(j)+.5,e.fill&&g.fillRect(i,j,f.width,f.height),e.stroke&&g.strokeRect(i,j,f.width,f.height),a(d)?g.drawImage(d,i+h,j+h):Flotr.drawText(g,d,i+h,j+h,{textBaseline:"top",textAlign:"left",size:e.fontSize,color:e.color})}})}(),function(){Flotr._;Flotr.defaultPieLabelFormatter=function(a,b){return(100*b/a).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20,epsilon:.1},draw:function(a){var b,c,d,e=a.data,f=a.context,g=f.canvas,h=a.lineWidth,i=a.shadowSize,j=a.sizeRatio,k=a.height,l=a.width,m=a.explode,n=a.color,o=a.fill,p=a.fillStyle,q=Math.min(g.width,g.height)*j/2,r=e[0][1],s=[],t=1,u=2*Math.PI*r/this.total,v=this.startAngle||2*Math.PI*a.startAngle,w=v+u,x=v+u/2,y=a.labelFormatter(this.total,r),z=m+q+4,A=Math.cos(x)*z,B=Math.sin(x)*z,C=0>A?"right":"left",D=B>0?"top":"bottom";if(f.save(),f.translate(l/2,k/2),f.scale(1,t),c=Math.cos(x)*m,d=Math.sin(x)*m,i>0&&(this.plotSlice(c+i,d+i,q,v,w,f),o&&(f.fillStyle="rgba(0,0,0,0.1)",f.fill())),this.plotSlice(c,d,q,v,w,f),o&&(f.fillStyle=p,f.fill()),f.lineWidth=h,f.strokeStyle=n,f.stroke(),b={size:1.2*a.fontSize,color:a.fontColor,weight:1.5},y&&(a.htmlText||!a.textEnabled?(divStyle="position:absolute;"+D+":"+(k/2+("top"===D?B:-B))+"px;",divStyle+=C+":"+(l/2+("right"===C?-A:A))+"px;",s.push('<div style="',divStyle,'" class="flotr-grid-label">',y,"</div>")):(b.textAlign=C,b.textBaseline=D,Flotr.drawText(f,y,A,B,b))),a.htmlText||!a.textEnabled){var E=Flotr.DOM.node('<div style="color:'+a.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(E,s.join("")),Flotr.DOM.insert(a.element,E)}f.restore(),this.startAngle=w,this.slices=this.slices||[],this.slices.push({radius:Math.min(g.width,g.height)*j/2,x:c,y:d,explode:m,start:v,end:w})},plotSlice:function(a,b,c,d,e,f){f.beginPath(),f.moveTo(a,b),f.arc(a,b,c,d,e,!1),f.lineTo(a,b),f.closePath()},hit:function(a){var b=a.data[0],c=a.args,d=a.index,e=c[0],f=c[1],g=this.slices[d],h=e.relX-a.width/2,i=e.relY-a.height/2,j=Math.sqrt(h*h+i*i),k=Math.atan(i/h),l=2*Math.PI,m=g.explode||a.explode,n=g.start%l,o=g.end%l,p=a.epsilon;0>h?k+=Math.PI:h>0&&0>i&&(k+=l),j<g.radius+m&&j>m&&(k>n&&o>k||n>o&&(o>k||k>n)||n===o&&(g.start===g.end&&Math.abs(k-n)<p||g.start!==g.end&&Math.abs(k-n)>p))&&(f.x=b[0],f.y=b[1],f.sAngle=n,f.eAngle=o,f.index=0,f.seriesIndex=d,f.fraction=b[1]/this.total)
},drawHit:function(a){var b=a.context,c=this.slices[a.args.seriesIndex];b.save(),b.translate(a.width/2,a.height/2),this.plotSlice(c.x,c.y,c.radius,c.start,c.end,b),b.stroke(),b.restore()},clearHit:function(a){var b=a.context,c=this.slices[a.args.seriesIndex],d=2*a.lineWidth,e=c.radius+d;b.save(),b.translate(a.width/2,a.height/2),b.clearRect(c.x-e,c.y-e,2*e+d,2*e+d),b.restore()},extendYRange:function(a,b){this.total=(this.total||0)+b[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(a){var b=a.context,c=(a.lineWidth,a.shadowSize);b.save(),c>0&&(b.lineWidth=c/2,b.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,c/2+b.lineWidth/2),b.strokeStyle="rgba(0,0,0,0.2)",this.plot(a,b.lineWidth/2)),b.lineWidth=a.lineWidth,b.strokeStyle=a.color,a.fill&&(b.fillStyle=a.fillStyle),this.plot(a),b.restore()},plot:function(a,b){var c,d,e,f=a.data,g=a.context,h=a.xScale,i=a.yScale;for(c=f.length-1;c>-1;--c)e=f[c][1],null!==e&&(d=h(f[c][0]),e=i(e),0>d||d>a.width||0>e||e>a.height||(g.beginPath(),b?g.arc(d,e+b,a.radius,0,Math.PI,!1):(g.arc(d,e,a.radius,0,2*Math.PI,!0),a.fill&&g.fill()),g.stroke(),g.closePath()))}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9,sensibility:2},draw:function(a){var b=a.context,c=a.shadowSize;b.save(),b.translate(a.width/2,a.height/2),b.lineWidth=a.lineWidth,b.fillStyle="rgba(0,0,0,0.05)",b.strokeStyle="rgba(0,0,0,0.05)",this.plot(a,c/2),b.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,c/4),b.strokeStyle=a.color,b.fillStyle=a.fillStyle,this.plot(a),b.restore()},plot:function(a,b){var c,d,e=a.data,f=a.context,g=Math.min(a.height,a.width)*a.radiusRatio/2,h=2*Math.PI/e.length,i=-Math.PI/2;for(b=b||0,f.beginPath(),c=0;c<e.length;++c)d=e[c][1]/this.max,f[0===c?"moveTo":"lineTo"](Math.cos(c*h+i)*g*d+b,Math.sin(c*h+i)*g*d+b);f.closePath(),a.fill&&f.fill(),f.stroke()},getGeometry:function(a,b){var c=Math.min(b.height,b.width)*b.radiusRatio/2,d=2*Math.PI/b.data.length,e=-Math.PI/2,f=a[1]/this.max;return{x:Math.cos(a[0]*d+e)*c*f+b.width/2,y:Math.sin(a[0]*d+e)*c*f+b.height/2}},hit:function(a){for(var b,c,d,e,f=a.args,g=f[0],h=f[1],i=g.relX,j=g.relY,k=0;k<h.series.length;k++)for(var l=h.series[k],m=l.data,n=m.length;n--;)if(c=this.getGeometry(m[n],a),d=c.x-i,e=c.y-j,b=Math.sqrt(d*d+e*e),b<2*a.sensibility)return h.x=m[n][0],h.y=m[n][1],h.index=n,h.seriesIndex=k,h},drawHit:function(a){var b=2*Math.PI/a.data.length,c=-Math.PI/2,d=Math.min(a.height,a.width)*a.radiusRatio/2,e=a.args.series,f=e.points.hitRadius||e.points.radius||e.mouse.radius,g=a.context;g.translate(a.width/2,a.height/2);var h=a.args.index,i=a.data[h][1]/this.max,j=Math.cos(h*b+c)*d*i,k=Math.sin(h*b+c)*d*i;g.beginPath(),g.arc(j,k,f,0,2*Math.PI,!0),g.closePath(),g.stroke()},clearHit:function(a){var b=2*Math.PI/a.data.length,c=-Math.PI/2,d=Math.min(a.height,a.width)*a.radiusRatio/2,e=a.context,f=a.args.series,g=f.points?f.points.lineWidth:1;offset=(f.points.hitRadius||f.points.radius||f.mouse.radius)+g,e.translate(a.width/2,a.height/2);var h=a.args.index,i=a.data[h][1]/this.max,j=Math.cos(h*b+c)*d*i,k=Math.sin(h*b+c)*d*i;e.clearRect(j-offset,k-offset,2*offset,2*offset)},extendYRange:function(a){this.max=Math.max(a.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(a){var b=a.context;b.save(),b.lineJoin="miter",b.lineWidth=a.lineWidth,b.strokeStyle=a.color,b.fillStyle=a.fillStyle,this.plot(a),b.restore()},plot:function(a){var b=a.data,c=a.context,d=a.xScale,e=a.yScale,f=a.barWidth,g=a.lineWidth;Flotr._.each(b,function(a){var b=a[0],h=a[1],i=a[2],j=f,k=Math.ceil(d(b)),l=Math.ceil(d(b+i))-k,m=Math.round(e(h)),n=Math.round(e(h-j))-m,o=k-g/2,p=Math.round(m-n/2)-g/2;c.strokeRect(o,p,l,n),c.fillRect(o,p,l,n)})},extendRange:function(a){var b=a.data,c=a.xaxis,d=a.yaxis,e=a.timeline.barWidth;if(null===c.options.min&&(c.min=c.datamin-e/2),null===c.options.max){var f=c.max;Flotr._.each(b,function(a){f=Math.max(f,a[0]+a[2])},this),c.max=f+e/2}null===d.options.min&&(d.min=d.datamin-e),null===d.options.min&&(d.max=d.datamax+e)}}),function(){var a=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(a,b){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(b))}},drawCrosshair:function(b){var c=this.octx,d=this.options.crosshair,e=this.plotOffset,f=e.left+Math.round(b.relX)+.5,g=e.top+Math.round(b.relY)+.5;return b.relX<0||b.relY<0||b.relX>this.plotWidth||b.relY>this.plotHeight?(this.el.style.cursor=null,a.removeClass(this.el,"flotr-crosshair"),void 0):(d.hideCursor&&(this.el.style.cursor="none",a.addClass(this.el,"flotr-crosshair")),c.save(),c.strokeStyle=d.color,c.lineWidth=1,c.beginPath(),-1!=d.mode.indexOf("x")&&(c.moveTo(f,e.top),c.lineTo(f,e.top+this.plotHeight)),-1!=d.mode.indexOf("y")&&(c.moveTo(e.left,g),c.lineTo(e.left+this.plotWidth,g)),c.stroke(),c.restore(),void 0)},clearCrosshair:function(){var a=this.plotOffset,b=this.lastMousePos,c=this.octx;b&&(c.clearRect(Math.round(b.relX)+a.left,a.top,1,this.plotHeight+1),c.clearRect(a.left,Math.round(b.relY)+a.top,this.plotWidth+1,1))}})}(),function(){function a(a,b,c,d,e,f){var g="image/"+a,h=c.getImageData(0,0,d,e),i=new Image;return c.save(),c.globalCompositeOperation="destination-over",c.fillStyle=f,c.fillRect(0,0,d,e),i.src=b.toDataURL(g),c.restore(),c.clearRect(0,0,d,e),c.putImageData(h,0,0),i}var b=Flotr.DOM,c=Flotr._;Flotr.addPlugin("download",{saveImage:function(d,e,f,g){var h,i=this.options.grid;if(Flotr.isIE&&Flotr.isIE<9)return h="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(h);if("jpeg"===d||"png"===d)return h=a(d,this.canvas,this.ctx,this.canvasWidth,this.canvasHeight,i&&i.backgroundColor||"#ffffff"),c.isElement(h)&&g?(this.download.restoreCanvas(),b.hide(this.canvas),b.hide(this.overlay),b.setStyles({position:"absolute"}),b.insert(this.el,h),this.saveImageElement=h,void 0):window.open(h.src)},restoreCanvas:function(){b.show(this.canvas),b.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var a=Flotr.EventAdapter,b=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function c(a){for(h=0;h<a.length;++h){var b=a[h].v/g.max;for(i=0;t>=i;++i)j[0===i?"moveTo":"lineTo"](Math.cos(i*u+v)*s*b,Math.sin(i*u+v)*s*b)}}function d(a,c){b.each(b.pluck(a,"v"),function(a){a<=g.min||a>=g.max||(a==g.min||a==g.max)&&l.outlineWidth||c(Math.floor(g.d2p(a))+j.lineWidth/2)})}function e(a){j.moveTo(a,0),j.lineTo(a,q)}function f(a){j.moveTo(0,a),j.lineTo(r,a)}var g,h,i,j=this.ctx,k=this.options,l=k.grid,m=l.verticalLines,n=l.horizontalLines,o=l.minorVerticalLines,p=l.minorHorizontalLines,q=this.plotHeight,r=this.plotWidth;if((m||o||n||p)&&a.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,k,this]),j.save(),j.lineWidth=1,j.strokeStyle=l.tickColor,l.circular){j.translate(this.plotOffset.left+r/2,this.plotOffset.top+q/2);var s=Math.min(q,r)*k.radar.radiusRatio/2,t=this.axes.x.ticks.length,u=2*(Math.PI/t),v=-Math.PI/2;j.beginPath(),g=this.axes.y,n&&c(g.ticks),p&&c(g.minorTicks),m&&b.times(t,function(a){j.moveTo(0,0),j.lineTo(Math.cos(a*u+v)*s,Math.sin(a*u+v)*s)}),j.stroke()}else j.translate(this.plotOffset.left,this.plotOffset.top),l.backgroundColor&&(j.fillStyle=this.processColor(l.backgroundColor,{x1:0,y1:0,x2:r,y2:q}),j.fillRect(0,0,r,q)),j.beginPath(),g=this.axes.x,m&&d(g.ticks,e),o&&d(g.minorTicks,e),g=this.axes.y,n&&d(g.ticks,f),p&&d(g.minorTicks,f),j.stroke();j.restore(),(m||o||n||p)&&a.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,k,this])},drawOutline:function(){var a,b,c,d,e=this,f=e.options,g=f.grid,h=g.outline,j=e.ctx,k=g.backgroundImage,l=e.plotOffset,m=l.left,n=l.top,o=e.plotWidth,p=e.plotHeight;if(g.outlineWidth){if(j.save(),g.circular){j.translate(m+o/2,n+p/2);var q=Math.min(p,o)*f.radar.radiusRatio/2,r=this.axes.x.ticks.length,s=2*(Math.PI/r),t=-Math.PI/2;for(j.beginPath(),j.lineWidth=g.outlineWidth,j.strokeStyle=g.color,j.lineJoin="round",i=0;r>=i;++i)j[0===i?"moveTo":"lineTo"](Math.cos(i*s+t)*q,Math.sin(i*s+t)*q);j.stroke()}else{j.translate(m,n);var u=g.outlineWidth,v=.5-u+(u+1)%2/2,w="lineTo",x="moveTo";j.lineWidth=u,j.strokeStyle=g.color,j.lineJoin="miter",j.beginPath(),j.moveTo(v,v),o-=u/2%1,p+=u/2,j[-1!==h.indexOf("n")?w:x](o,v),j[-1!==h.indexOf("e")?w:x](o,p),j[-1!==h.indexOf("s")?w:x](v,p),j[-1!==h.indexOf("w")?w:x](v,v),j.stroke(),j.closePath()}j.restore(),k&&(b=k.src||k,c=(parseInt(k.left,10)||0)+l.left,d=(parseInt(k.top,10)||0)+l.top,a=new Image,a.onload=function(){j.save(),k.alpha&&(j.globalAlpha=k.alpha),j.globalCompositeOperation="destination-over",j.drawImage(a,0,0,a.width,a.height,c,d,o,p),j.restore()},a.src=b)}}})}(),function(){var a=Flotr.DOM,b=Flotr._,c=Flotr,d="opacity:0.7;background-color:#000;color:#fff;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(a,b){this.hit.track(b)},"flotr:click":function(a){var c=this.hit.track(a);c&&!b.isUndefined(c.index)&&(a.hit=c)},"flotr:mouseout":function(a){a.relatedTarget!==this.mouseTrack&&this.hit.clearHit()},"flotr:destroy":function(){this.options.mouse.container&&a.remove(this.mouseTrack),this.mouseTrack=null}},track:function(a){return this.options.mouse.track||b.any(this.series,function(a){return a.mouse&&a.mouse.track})?this.hit.hit(a):void 0},executeOnType:function(a,d,e){function f(a,f){b.each(b.keys(c.graphTypes),function(b){a[b]&&a[b].show&&this[b][d]&&(g=this.getOptions(a,b),g.fill=!!a.mouse.fillColor,g.fillStyle=this.processColor(a.mouse.fillColor||"#ffffff",{opacity:a.mouse.fillOpacity}),g.color=a.mouse.lineColor,g.context=this.octx,g.index=f,e&&(g.args=e),this[b][d].call(this[b],g),h=!0)},this)}var g,h=!1;return b.isArray(a)||(a=[a]),b.each(a,f,this),h},drawHit:function(a){var b=this.octx,c=a.series;if(c.mouse.lineColor){if(b.save(),b.lineWidth=c.points?c.points.lineWidth:1,b.strokeStyle=c.mouse.lineColor,b.fillStyle=this.processColor(c.mouse.fillColor||"#ffffff",{opacity:c.mouse.fillOpacity}),b.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(c,"drawHit",a)){var d=a.xaxis,e=a.yaxis;b.beginPath(),b.arc(d.d2p(a.x),e.d2p(a.y),c.points.hitRadius||c.points.radius||c.mouse.radius,0,2*Math.PI,!0),b.fill(),b.stroke(),b.closePath()}b.restore(),this.clip(b)}this.prevHit=a},clearHit:function(){var b=this.prevHit,c=this.octx,d=this.plotOffset;if(c.save(),c.translate(d.left,d.top),b){if(!this.hit.executeOnType(b.series,"clearHit",this.prevHit)){var e=b.series,f=e.points?e.points.lineWidth:1;offset=(e.points.hitRadius||e.points.radius||e.mouse.radius)+f,c.clearRect(b.xaxis.d2p(b.x)-offset,b.yaxis.d2p(b.y)-offset,2*offset,2*offset)}a.hide(this.mouseTrack),this.prevHit=null}c.restore()},hit:function(a){var c,d,e,f,g,h,i,j=this.options,k=this.prevHit;if(0!==this.series.length)return i={relX:a.relX,relY:a.relY,absX:a.absX,absY:a.absY,series:this.series},j.mouse.trackY&&!j.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[a,i])&&!b.isUndefined(i.seriesIndex)?(f=this.series[i.seriesIndex],i.series=f,i.mouse=f.mouse,i.xaxis=f.xaxis,i.yaxis=f.yaxis):(c=this.hit.closest(a),c&&(c=j.mouse.trackY?c.point:c.x,e=c.seriesIndex,f=this.series[e],g=f.xaxis,h=f.yaxis,d=2*f.mouse.sensibility,(j.mouse.trackAll||c.distanceX<d/g.scale&&(!j.mouse.trackY||c.distanceY<d/h.scale))&&(i.series=f,i.xaxis=f.xaxis,i.yaxis=f.yaxis,i.mouse=f.mouse,i.x=c.x,i.y=c.y,i.dist=c.distance,i.index=c.dataIndex,i.seriesIndex=e))),k&&k.index===i.index&&k.seriesIndex===i.seriesIndex||(this.hit.clearHit(),i.series&&i.mouse&&i.mouse.track&&(this.hit.drawMouseTrack(i),this.hit.drawHit(i),Flotr.EventAdapter.fire(this.el,"flotr:hit",[i,this]))),i},closest:function(a){function b(a){a.distance=e,a.distanceX=f,a.distanceY=g,a.seriesIndex=l,a.dataIndex=m,a.x=j,a.y=k,u=!0}var c,d,e,f,g,h,i,j,k,l,m,n=this.series,o=(this.options,a.relX),p=a.relY,q=Number.MAX_VALUE,r=Number.MAX_VALUE,s={},t={},u=!1;for(l=0;l<n.length;l++)for(c=n[l],d=c.data,h=c.xaxis.p2d(o),i=c.yaxis.p2d(p),m=d.length;m--;)j=d[m][0],k=d[m][1],null!==j&&null!==k&&(j<c.xaxis.min||j>c.xaxis.max||(f=Math.abs(j-h),g=Math.abs(k-i),e=f*f+g*g,q>e&&(q=e,b(s)),r>f&&(r=f,b(t))));return u?{point:s,x:t}:!1},drawMouseTrack:function(b){var c,e,f="",g=b.series,h=b.mouse.position,i=b.mouse.margin,j=b.x,k=b.y,l=d,m=this.mouseTrack,n=this.plotOffset,o=n.left,p=(n.right,n.bottom,n.top),q=b.mouse.trackDecimals,r=this.options,s=r.mouse.container,t=0,u=0;if(m||(m=a.node('<div class="flotr-mouse-value" style="'+l+'"></div>'),this.mouseTrack=m,a.insert(s||this.el,m)),(!q||0>q)&&(q=0),j&&j.toFixed&&(j=j.toFixed(q)),k&&k.toFixed&&(k=k.toFixed(q)),m.innerHTML=b.mouse.trackFormatter({x:j,y:k,series:b.series,index:b.index,nearest:b,fraction:b.fraction}),a.show(m),e=a.size(m),s&&(c=a.position(this.el),t=c.top,u=c.left),b.mouse.relative)if(g.pie&&g.pie.show){var v={x:this.plotWidth/2,y:this.plotHeight/2},w=Math.min(this.canvasWidth,this.canvasHeight)*g.pie.sizeRatio/2,x=b.sAngle<b.eAngle?(b.sAngle+b.eAngle)/2:(b.sAngle+b.eAngle+2*Math.PI)/2;f+="bottom:"+(i-p-v.y-Math.sin(x)*w/2+this.canvasHeight)+"px;top:auto;",f+="left:"+(i+o+v.x+Math.cos(x)*w/2)+"px;right:auto;"}else f+="top:",f+=/n/.test(h)?t-i+p+b.yaxis.d2p(b.y)-e.height:t+i+p+b.yaxis.d2p(b.y),f+="px;bottom:auto;left:",f+=/w/.test(h)?u-i+o+b.xaxis.d2p(b.x)-e.width:u+i+o+b.xaxis.d2p(b.x),f+="px;right:auto;";else f+="top:","n"==h.charAt(0)?f+=t+i+p:"s"==h.charAt(0)&&(f+=t-i+p+this.plotHeight-e.height),f+="px;bottom:auto;left:","e"==h.charAt(1)?f+=u-i+o+this.plotWidth-e.width:"w"==h.charAt(1)&&(f+=u+i+o),f+="px;right:auto;";m.style.cssText=l+f,b.mouse.relative&&(/[ew]/.test(h)?/[ns]/.test(h)||(m.style.top=t+p+b.yaxis.d2p(b.y)-a.size(m).height/2+"px"):m.style.left=u+o+b.xaxis.d2p(b.x)-a.size(m).width/2+"px")}})}(),function(){function a(a){return a.which?1===a.which:0===a.button||1===a.button}function b(a,b){return Math.min(Math.max(0,a),b.plotWidth-1)}function c(a,b){return Math.min(Math.max(0,a),b.plotHeight)}var d=(Flotr.DOM,Flotr.EventAdapter),e=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(a){var b=this.options.selection,c=this.selection,d=this.getEventPosition(a);b&&b.mode&&(c.interval&&clearInterval(c.interval),this.multitouches?c.updateSelection():b.pinchOnly||c.setSelectionPos(c.selection.second,d),c.clearSelection(),c.selecting&&c.selectionIsSane()&&(c.drawSelection(),c.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(b){var c=this.options.selection,d=this.selection,f=this.getEventPosition(b);c&&c.mode&&(!c.mode||!a(b)&&e.isUndefined(b.touches)||(c.pinchOnly||d.setSelectionPos(d.selection.first,f),d.interval&&clearInterval(d.interval),this.lastMousePos.pageX=null,d.selecting=!1,d.interval=setInterval(e.bind(d.updateSelection,this),1e3/c.fps)))},"flotr:destroy":function(){clearInterval(this.selection.interval)}},getArea:function(){{var a,b,c,d,e=this.selection.selection,f=this.axes;e.first,e.second}return a=f.x.p2d(e.first.x),b=f.x.p2d(e.second.x),c=f.y.p2d(e.first.y),d=f.y.p2d(e.second.y),{x1:Math.min(a,b),y1:Math.min(c,d),x2:Math.max(a,b),y2:Math.max(c,d),xfirst:a,xsecond:b,yfirst:c,ysecond:d}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(a){var b=this.selection.getArea();a=a||"select",b.selection=this.selection.selection,d.fire(this.el,"flotr:"+a,[b,this])},setSelection:function(a,d){var e=this.options,f=this.axes.x,g=this.axes.y,h=g.scale,i=f.scale,j=-1!=e.selection.mode.indexOf("x"),k=-1!=e.selection.mode.indexOf("y"),l=this.selection.selection;this.selection.clearSelection(),l.first.y=c(j&&!k?0:(g.max-a.y1)*h,this),l.second.y=c(j&&!k?this.plotHeight-1:(g.max-a.y2)*h,this),l.first.x=b(k&&!j?0:(a.x1-f.min)*i,this),l.second.x=b(k&&!j?this.plotWidth:(a.x2-f.min)*i,this),this.selection.drawSelection(),d||this.selection.fireSelectEvent()},setSelectionPos:function(a,d){var e=this.options.selection.mode,f=this.selection.selection;a.x=-1==e.indexOf("x")?a==f.first?0:this.plotWidth:b(d.relX,this),a.y=-1==e.indexOf("y")?a==f.first?0:this.plotHeight-1:c(d.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var a=this.selection.selection,b=this.octx,c=this.options,d=this.plotOffset,e=this.selection.prevSelection;if(!e||a.first.x!=e.first.x||a.first.y!=e.first.y||a.second.x!=e.second.x||a.second.y!=e.second.y){b.save(),b.strokeStyle=this.processColor(c.selection.color,{opacity:.8}),b.lineWidth=1,b.lineJoin="miter",b.fillStyle=this.processColor(c.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:a.first.x,y:a.first.y},second:{x:a.second.x,y:a.second.y}};var f=Math.min(a.first.x,a.second.x),g=Math.min(a.first.y,a.second.y),h=Math.abs(a.second.x-a.first.x),i=Math.abs(a.second.y-a.first.y);b.fillRect(f+d.left+.5,g+d.top+.5,h,i),b.strokeRect(f+d.left+.5,g+d.top+.5,h,i),b.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var a=this.selection.prevSelection,b=1,c=this.plotOffset,d=Math.min(a.first.x,a.second.x),e=Math.min(a.first.y,a.second.y),f=Math.abs(a.second.x-a.first.x),g=Math.abs(a.second.y-a.first.y);this.octx.clearRect(d+c.left-b+.5,e+c.top-b,f+2*b+.5,g+2*b+.5),this.selection.prevSelection=null}},selectionIsSane:function(){var a=this.selection.selection;return Math.abs(a.second.x-a.first.x)>=5||Math.abs(a.second.y-a.first.y)>=5}})}(),function(){var a=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function b(a,b,c){{var d,f=c?b.minorTicks:b.ticks,h=1===b.orientation;1===b.n}for(d={color:b.options.color||o.grid.color,angle:Flotr.toRad(b.options.labelsAngle),textBaseline:"middle"},l=0;l<f.length&&(c?b.options.showMinorLabels:b.options.showLabels);++l)e=f[l],e.label+="",e.label&&e.label.length&&(x=Math.cos(l*i+j)*g,y=Math.sin(l*i+j)*g,d.textAlign=h?Math.abs(x)<.1?"center":0>x?"right":"left":"left",Flotr.drawText(p,e.label,h?x:3,h?y:-(b.ticks[l].v/b.max)*(g-o.fontSize),d))}function c(a,b,c,d){function f(a){return a.options.showLabels&&a.used}function g(a,b,c,d){return a.plotOffset.left+(b?d:c?-o.grid.labelMargin:o.grid.labelMargin+a.plotWidth)}function h(a,b,c,d){return a.plotOffset.top+(b?o.grid.labelMargin:d)+(b&&c?a.plotHeight:0)}var i,j,k=1===b.orientation,m=1===b.n;for(i={color:b.options.color||o.grid.color,textAlign:c,textBaseline:d,angle:Flotr.toRad(b.options.labelsAngle)},i=Flotr.getBestTextAlign(i.angle,i),l=0;l<b.ticks.length&&f(b);++l)e=b.ticks[l],e.label&&e.label.length&&(j=b.d2p(e.v),0>j||j>(k?a.plotWidth:a.plotHeight)||(Flotr.drawText(p,e.label,g(a,k,m,j),h(a,k,m,j),i),!k&&!m&&(p.save(),p.strokeStyle=i.color,p.beginPath(),p.moveTo(a.plotOffset.left+a.plotWidth-8,a.plotOffset.top+b.d2p(e.v)),p.lineTo(a.plotOffset.left+a.plotWidth,a.plotOffset.top+b.d2p(e.v)),p.stroke(),p.restore())))}function d(a,b){var c,d,g=1===b.orientation,h=1===b.n,i="",j=a.plotOffset;if(!g&&!h&&(p.save(),p.strokeStyle=b.options.color||o.grid.color,p.beginPath()),b.options.showLabels&&(h?!0:b.used))for(l=0;l<b.ticks.length;++l)e=b.ticks[l],!e.label||!e.label.length||(g?j.left:j.top)+b.d2p(e.v)<0||(g?j.left:j.top)+b.d2p(e.v)>(g?a.canvasWidth:a.canvasHeight)||(d=j.top+(g?(h?1:-1)*(a.plotHeight+o.grid.labelMargin):b.d2p(e.v)-b.maxLabel.height/2),c=g?j.left+b.d2p(e.v)-f/2:0,i="",0===l?i=" first":l===b.ticks.length-1&&(i=" last"),i+=g?" flotr-grid-label-x":" flotr-grid-label-y",m+=['<div style="position:absolute; text-align:'+(g?"center":"right")+"; ","top:"+d+"px; ",(g||h?"left:":"right:")+c+"px; ","width:"+(g?f:(h?j.left:j.right)-o.grid.labelMargin)+"px; ",b.options.color?"color:"+b.options.color+"; ":" ",'" class="flotr-grid-label'+i+'">'+e.label+"</div>"].join(" "),!g&&!h&&(p.moveTo(j.left+a.plotWidth-8,j.top+b.d2p(e.v)),p.lineTo(j.left+a.plotWidth,j.top+b.d2p(e.v))))}{var e,f,g,h,i,j,k,l,m="",n=0,o=this.options,p=this.ctx,q=this.axes;({size:o.fontSize})}for(l=0;l<q.x.ticks.length;++l)q.x.ticks[l].label&&++n;f=this.plotWidth/n,o.grid.circular&&(p.save(),p.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),g=this.plotHeight*o.radar.radiusRatio/2+o.fontSize,h=this.axes.x.ticks.length,i=2*(Math.PI/h),j=-Math.PI/2,b(this,q.x,!1),b(this,q.x,!0),b(this,q.y,!1),b(this,q.y,!0),p.restore()),!o.HtmlText&&this.textEnabled?(c(this,q.x,"center","top"),c(this,q.x2,"center","bottom"),c(this,q.y,"right","middle"),c(this,q.y2,"left","middle")):(q.x.options.showLabels||q.x2.options.showLabels||q.y.options.showLabels||q.y2.options.showLabels)&&!o.grid.circular&&(m="",d(this,q.x),d(this,q.x2),d(this,q.y),d(this,q.y2),p.stroke(),p.restore(),k=a.create("div"),a.setStyles(k,{fontSize:"smaller",color:o.grid.color}),k.className="flotr-labels",a.insert(this.el,k),a.insert(k,m))}})}(),function(){var a=Flotr.DOM,b=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(a){return a},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()},"flotr:destroy":function(){var b=this.legend.markup;b&&(this.legend.markup=null,a.remove(b))}},insertLegend:function(){if(this.options.legend.show){var c,d,e,f=this.series,g=this.plotOffset,h=this.options,i=h.legend,j=[],k=!1,l=this.ctx,m=b.filter(f,function(a){return a.label&&!a.hide}).length,n=i.position,o=i.margin,p=i.backgroundOpacity;if(m){var q=i.labelBoxWidth,r=i.labelBoxHeight,s=i.labelBoxMargin,t=g.left+o,u=g.top+o,v=0,w={size:1.1*h.fontSize,color:h.grid.color};for(c=f.length-1;c>-1;--c)f[c].label&&!f[c].hide&&(d=i.labelFormatter(f[c].label),v=Math.max(v,this._text.measureText(d,w).width));var x=Math.round(q+3*s+v),y=Math.round(m*(s+r)+s);if(!p&&0!==p&&(p=.1),h.HtmlText||!this.textEnabled||i.container){for(c=0;c<f.length;++c)if(f[c].label&&!f[c].hide){c%i.noColumns===0&&(j.push(k?"</tr><tr>":"<tr>"),k=!0);var z=f[c],A=i.labelBoxWidth,B=i.labelBoxHeight;d=i.labelFormatter(z.label),e="background-color:"+(z.bars&&z.bars.show&&z.bars.fillColor&&z.bars.fill?z.bars.fillColor:z.color)+";",j.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',i.labelBoxBorderColor,';padding:1px">','<div style="width:',A-1,"px;height:",B-1,"px;border:1px solid ",f[c].color,'">','<div style="width:',A,"px;height:",B,"px;",e,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',d,"</td>")}if(k&&j.push("</tr>"),j.length>0){var C='<table style="font-size:smaller;color:'+h.grid.color+'">'+j.join("")+"</table>";if(i.container)C=a.node(C),this.legend.markup=C,a.insert(i.container,C);else{var D={position:"absolute",zIndex:"2",border:"1px solid "+i.labelBoxBorderColor};"n"==n.charAt(0)?(D.top=o+g.top+"px",D.bottom="auto"):"c"==n.charAt(0)?(D.top=o+(this.plotHeight-y)/2+"px",D.bottom="auto"):"s"==n.charAt(0)&&(D.bottom=o+g.bottom+"px",D.top="auto"),"e"==n.charAt(1)?(D.right=o+g.right+"px",D.left="auto"):"w"==n.charAt(1)&&(D.left=o+g.left+"px",D.right="auto");var E=a.create("div");if(E.className="flotr-legend",a.setStyles(E,D),a.insert(E,C),a.insert(this.el,E),!p)return;var F=i.backgroundColor||h.grid.backgroundColor||"#ffffff";b.extend(D,a.size(E),{backgroundColor:F,zIndex:"",border:""}),D.width+="px",D.height+="px",E=a.create("div"),E.className="flotr-legend-bg",a.setStyles(E,D),a.opacity(E,p),a.insert(E," "),a.insert(this.el,E)}}}else{"s"==n.charAt(0)&&(u=g.top+this.plotHeight-(o+y)),"c"==n.charAt(0)&&(u=g.top+this.plotHeight/2-(o+y/2)),"e"==n.charAt(1)&&(t=g.left+this.plotWidth-(o+x)),e=this.processColor(i.backgroundColor,{opacity:p}),l.fillStyle=e,l.fillRect(t,u,x,y),l.strokeStyle=i.labelBoxBorderColor,l.strokeRect(Flotr.toPixel(t),Flotr.toPixel(u),x,y);var G=t+s,H=u+s;for(c=0;c<f.length;c++)f[c].label&&!f[c].hide&&(d=i.labelFormatter(f[c].label),l.fillStyle=f[c].color,l.fillRect(G,H,q-1,r-1),l.strokeStyle=i.labelBoxBorderColor,l.lineWidth=1,l.strokeRect(Math.ceil(G)-1.5,Math.ceil(H)-1.5,q+2,r+2),Flotr.drawText(l,d,G+q+s,H+r,w),H+=r+s)}}}}})}(),function(){function a(a){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(a);var b=c.find(this.axes.x.ticks,function(b){return b.v==a});return b?b.label:a}var b=Flotr.DOM,c=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var a,c=this.spreadsheet,d=b.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),e=b.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),f=b.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>");c.tabsContainer=d,c.tabs={graph:e,data:f},b.insert(d,e),b.insert(d,f),b.insert(this.el,d),a=b.size(f).height+2,this.plotOffset.bottom+=a,b.setStyles(d,{top:this.canvasHeight-a+"px"}),this.observe(e,"click",function(){c.showTab("graph")}).observe(f,"click",function(){c.showTab("data")}),"graph"!==this.options.spreadsheet.initialTab&&c.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var a=this.series,b={};return c.each(a,function(a,d){c.each(a.data,function(a){var c=a[0],e=a[1],f=b[c];if(f)f[d+1]=e;else{var g=[];g[0]=c,g[d+1]=e,b[c]=g}})}),this.seriesData=c.sortBy(b,function(a,b){return parseInt(b,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var d,e,f,g=this.series,h=this.spreadsheet.loadDataGrid(),i=["<colgroup><col />"],j=['<table class="flotr-datagrid"><tr class="first-row">'];j.push("<th>&nbsp;</th>"),c.each(g,function(a,b){j.push('<th scope="col">'+(a.label||String.fromCharCode(65+b))+"</th>"),i.push("<col />")}),j.push("</tr>"),c.each(h,function(b){j.push("<tr>"),c.times(g.length+1,function(d){var e="td",f=b[d],g=c.isUndefined(f)?"":Math.round(1e5*f)/1e5;if(0===d){e="th";var h=a.call(this,g);h&&(g=h)}j.push("<"+e+("th"==e?' scope="row"':"")+">"+g+"</"+e+">")},this),j.push("</tr>")},this),i.push("</colgroup>"),f=b.node(j.join("")),d=b.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),e=b.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(d,"click",c.bind(this.spreadsheet.downloadCSV,this)).observe(e,"click",c.bind(this.spreadsheet.selectAllData,this));var k=b.node('<div class="flotr-datagrid-toolbar"></div>');b.insert(k,d),b.insert(k,e);var l=this.canvasHeight-b.size(this.spreadsheet.tabsContainer).height-2,m=b.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+l+'px;overflow:auto;z-index:10"></div>');return b.insert(m,k),b.insert(m,f),b.insert(this.el,m),this.spreadsheet.datagrid=f,this.spreadsheet.container=m,f},showTab:function(a){if(this.spreadsheet.activeTab!==a){switch(a){case"graph":b.hide(this.spreadsheet.container),b.removeClass(this.spreadsheet.tabs.data,"selected"),b.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),b.show(this.spreadsheet.container),b.addClass(this.spreadsheet.tabs.data,"selected"),b.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+a}this.spreadsheet.activeTab=a}},selectAllData:function(){if(this.spreadsheet.tabs){var a,b,c,d,e=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(c=e.ownerDocument)&&(d=c.defaultView)&&d.getSelection&&c.createRange&&(a=window.getSelection())&&a.removeAllRanges?(b=c.createRange(),b.selectNode(e),a.removeAllRanges(),a.addRange(b)):document.body&&document.body.createTextRange&&(b=document.body.createTextRange())&&(b.moveToElementText(e),b.select())},0),!0}return!1},downloadCSV:function(){var b="",d=this.series,e=this.options,f=this.spreadsheet.loadDataGrid(),g=encodeURIComponent(e.spreadsheet.csvFileSeparator);if(e.spreadsheet.decimalSeparator===e.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+e.spreadsheet.decimalSeparator+")";c.each(d,function(a,c){b+=g+'"'+(a.label||String.fromCharCode(65+c)).replace(/\"/g,'\\"')+'"'}),b+="%0D%0A",b+=c.reduce(f,function(b,c){var d=a.call(this,c[0])||"";d='"'+(d+"").replace(/\"/g,'\\"')+'"';var f=c.slice(1).join(g);return"."!==e.spreadsheet.decimalSeparator&&(f=f.replace(/\./g,e.spreadsheet.decimalSeparator)),b+d+g+f+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(b=b.replace(new RegExp(g,"g"),decodeURIComponent(g)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(b)):window.open("data:text/csv,"+b)}})}(),function(){var a=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var b,c=this.options,d=c.grid.labelMargin,e=this.ctx,f=this.axes;if(!c.HtmlText&&this.textEnabled){var g={size:c.fontSize,color:c.grid.color,textAlign:"center"};c.subtitle&&Flotr.drawText(e,c.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,g),g.weight=1.5,g.size*=1.5,c.title&&Flotr.drawText(e,c.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,g),g.weight=1.8,g.size*=.8,f.x.options.title&&f.x.used&&(g.textAlign=f.x.options.titleAlign||"center",g.textBaseline="top",g.angle=Flotr.toRad(f.x.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+f.x.maxLabel.height+this.plotHeight+2*d,g)),f.x2.options.title&&f.x2.used&&(g.textAlign=f.x2.options.titleAlign||"center",g.textBaseline="bottom",g.angle=Flotr.toRad(f.x2.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-f.x2.maxLabel.height-2*d,g)),f.y.options.title&&f.y.used&&(g.textAlign=f.y.options.titleAlign||"right",g.textBaseline="middle",g.angle=Flotr.toRad(f.y.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.y.options.title,this.plotOffset.left-f.y.maxLabel.width-2*d,this.plotOffset.top+this.plotHeight/2,g)),f.y2.options.title&&f.y2.used&&(g.textAlign=f.y2.options.titleAlign||"left",g.textBaseline="middle",g.angle=Flotr.toRad(f.y2.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.y2.options.title,this.plotOffset.left+this.plotWidth+f.y2.maxLabel.width+2*d,this.plotOffset.top+this.plotHeight/2,g))}else{b=[],c.title&&b.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',c.title,"</div>"),c.subtitle&&b.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',c.subtitle,"</div>"),b.push("</div>"),b.push('<div class="flotr-axis-title" style="font-weight:bold;">'),f.x.options.title&&f.x.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+c.grid.labelMargin+f.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",f.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',f.x.options.title,"</div>"),f.x2.options.title&&f.x2.used&&b.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",f.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',f.x2.options.title,"</div>"),f.y.options.title&&f.y.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-f.y.titleSize.height/2,"px;left:0;text-align:",f.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',f.y.options.title,"</div>"),f.y2.options.title&&f.y2.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-f.y.titleSize.height/2,"px;right:0;text-align:",f.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',f.y2.options.title,"</div>"),b=b.join("");
var h=a.create("div");a.setStyles({color:c.grid.color}),h.className="flotr-titles",a.insert(this.el,h),a.insert(h,b)}}})}(),!function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s={}.hasOwnProperty,t=function(a,b){function c(){this.constructor=a}for(var d in b)s.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(){var a,b,c,d,e,f,g;for(e=["ms","moz","webkit","o"],f=0,g=e.length;g>f&&(d=e[f],!window.requestAnimationFrame);f++)window.requestAnimationFrame=window[d+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"];return a=null,c=0,b={},requestAnimationFrame?window.cancelAnimationFrame?void 0:(a=window.requestAnimationFrame,window.requestAnimationFrame=function(d,e){var f;return f=++c,a(function(){return b[f]?void 0:d()},e),f},window.cancelAnimationFrame=function(a){return b[a]=!0}):(window.requestAnimationFrame=function(a){var b,c,d,e;return b=(new Date).getTime(),e=Math.max(0,16-(b-d)),c=window.setTimeout(function(){return a(b+e)},e),d=b+e,c},window.cancelAnimationFrame=function(a){return clearTimeout(a)})}(),String.prototype.hashCode=function(){var a,b,c,d,e;if(b=0,0===this.length)return b;for(c=d=0,e=this.length;e>=0?e>d:d>e;c=e>=0?++d:--d)a=this.charCodeAt(c),b=(b<<5)-b+a,b&=b;return b},o=function(a){var b,c;for(b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),a-=3600*b+60*c,a+="",c+="";c.length<2;)c="0"+c;for(;a.length<2;)a="0"+a;return b=b?b+":":"",b+c+":"+a},m=function(a){return k(a.toFixed(0))},p=function(a,b){var c,d;for(c in b)s.call(b,c)&&(d=b[c],a[c]=d);return a},n=function(a,b){var c,d,e;d={};for(c in a)s.call(a,c)&&(e=a[c],d[c]=e);for(c in b)s.call(b,c)&&(e=b[c],d[c]=e);return d},k=function(a){var b,c,d,e;for(a+="",c=a.split("."),d=c[0],e="",c.length>1&&(e="."+c[1]),b=/(\d+)(\d{3})/;b.test(d);)d=d.replace(b,"$1,$2");return d+e},l=function(a){return"#"===a.charAt(0)?a.substring(1,7):a},j=function(){function a(a,b){null==a&&(a=!0),this.clear=null!=b?b:!0,a&&AnimationUpdater.add(this)}return a.prototype.animationSpeed=32,a.prototype.update=function(a){var b;return null==a&&(a=!1),a||this.displayedValue!==this.value?(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),b=this.value-this.displayedValue,this.displayedValue=Math.abs(b/this.animationSpeed)<=.001?this.value:this.displayedValue+b/this.animationSpeed,this.render(),!0):!1},a}(),e=function(a){function b(){return q=b.__super__.constructor.apply(this,arguments)}return t(b,a),b.prototype.displayScale=1,b.prototype.setTextField=function(a){return this.textField=a instanceof i?a:new i(a)},b.prototype.setMinValue=function(a,b){var c,d,e,f,g;if(this.minValue=a,null==b&&(b=!0),b){for(this.displayedValue=this.minValue,f=this.gp||[],g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.displayedValue=this.minValue);return g}},b.prototype.setOptions=function(a){return null==a&&(a=null),this.options=n(this.options,a),this.textField&&(this.textField.el.style.fontSize=a.fontSize+"px"),this.options.angle>.5&&(this.gauge.options.angle=.5),this.configDisplayScale(),this},b.prototype.configDisplayScale=function(){var a,b,c,d,e;return d=this.displayScale,this.options.highDpiSupport===!1?delete this.displayScale:(b=window.devicePixelRatio||1,a=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.displayScale=b/a),this.displayScale!==d&&(e=this.canvas.G__width||this.canvas.width,c=this.canvas.G__height||this.canvas.height,this.canvas.width=e*this.displayScale,this.canvas.height=c*this.displayScale,this.canvas.style.width=""+e+"px",this.canvas.style.height=""+c+"px",this.canvas.G__width=e,this.canvas.G__height=c),this},b}(j),i=function(){function a(a){this.el=a}return a.prototype.render=function(a){return this.el.innerHTML=m(a.displayedValue)},a}(),a=function(a){function b(a,b){this.elem=a,this.text=null!=b?b:!1,this.value=1*this.elem.innerHTML,this.text&&(this.value=0)}return t(b,a),b.prototype.displayedValue=0,b.prototype.value=0,b.prototype.setVal=function(a){return this.value=1*a},b.prototype.render=function(){var a;return a=this.text?o(this.displayedValue.toFixed(0)):k(m(this.displayedValue)),this.elem.innerHTML=a},b}(j),b={create:function(b){var c,d,e,f;for(d=[],e=0,f=b.length;f>e;e++)c=b[e],d.push(new a(c));return d}},h=function(a){function b(a){this.gauge=a,this.ctx=this.gauge.ctx,this.canvas=this.gauge.canvas,b.__super__.constructor.call(this,!1,!1),this.setOptions()}return t(b,a),b.prototype.displayedValue=0,b.prototype.value=0,b.prototype.options={strokeWidth:.035,length:.1,color:"#000000"},b.prototype.setOptions=function(a){return null==a&&(a=null),p(this.options,a),this.length=this.canvas.height*this.options.length,this.strokeWidth=this.canvas.height*this.options.strokeWidth,this.maxValue=this.gauge.maxValue,this.minValue=this.gauge.minValue,this.animationSpeed=this.gauge.animationSpeed,this.options.angle=this.gauge.options.angle},b.prototype.render=function(){var a,b,c,d,e,f,g,h,i;return a=this.gauge.getAngle.call(this,this.displayedValue),b=this.canvas.width/2,c=.9*this.canvas.height,h=Math.round(b+this.length*Math.cos(a)),i=Math.round(c+this.length*Math.sin(a)),f=Math.round(b+this.strokeWidth*Math.cos(a-Math.PI/2)),g=Math.round(c+this.strokeWidth*Math.sin(a-Math.PI/2)),d=Math.round(b+this.strokeWidth*Math.cos(a+Math.PI/2)),e=Math.round(c+this.strokeWidth*Math.sin(a+Math.PI/2)),this.ctx.fillStyle=this.options.color,this.ctx.beginPath(),this.ctx.arc(b,c,this.strokeWidth,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(f,g),this.ctx.lineTo(h,i),this.ctx.lineTo(d,e),this.ctx.fill()},b}(j),c=function(){function a(a){this.elem=a}return a.prototype.updateValues=function(a){return this.value=a[0],this.maxValue=a[1],this.avgValue=a[2],this.render()},a.prototype.render=function(){var a,b;return this.textField&&this.textField.text(m(this.value)),0===this.maxValue&&(this.maxValue=2*this.avgValue),b=this.value/this.maxValue*100,a=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:b+"%"}),$(".typical-value",this.elem).css({width:a+"%"})},a}(),g=function(a){function b(a){this.canvas=a,b.__super__.constructor.call(this),this.percentColors=null,"undefined"!=typeof G_vmlCanvasManager&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.gp=[new h(this)],this.setOptions(),this.render()}return t(b,a),b.prototype.elem=null,b.prototype.value=[20],b.prototype.maxValue=80,b.prototype.minValue=0,b.prototype.displayedAngle=0,b.prototype.displayedValue=0,b.prototype.lineWidth=40,b.prototype.paddingBottom=.1,b.prototype.percentColors=null,b.prototype.options={colorStart:"#6fadcf",colorStop:void 0,gradientType:0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035},angle:.15,lineWidth:.44,fontSize:40,limitMax:!1,percentColors:[[0,"#a9d70b"],[.5,"#f9c802"],[1,"#ff0000"]]},b.prototype.setOptions=function(a){var c,d,e,f;for(null==a&&(a=null),b.__super__.setOptions.call(this,a),this.configPercentColors(),this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth,this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.render(),f=this.gp,d=0,e=f.length;e>d;d++)c=f[d],c.setOptions(this.options.pointer),c.render();return this},b.prototype.configPercentColors=function(){var a,b,c,d,e,f,g;if(this.percentColors=null,void 0!==this.options.percentColors){for(this.percentColors=new Array,g=[],c=e=0,f=this.options.percentColors.length-1;f>=0?f>=e:e>=f;c=f>=0?++e:--e)d=parseInt(l(this.options.percentColors[c][1]).substring(0,2),16),b=parseInt(l(this.options.percentColors[c][1]).substring(2,4),16),a=parseInt(l(this.options.percentColors[c][1]).substring(4,6),16),g.push(this.percentColors[c]={pct:this.options.percentColors[c][0],color:{r:d,g:b,b:a}});return g}},b.prototype.set=function(a){var b,c,d,e,f,g,i;if(a instanceof Array||(a=[a]),a.length>this.gp.length)for(b=e=0,i=a.length-this.gp.length;i>=0?i>e:e>i;b=i>=0?++e:--e)this.gp.push(new h(this));for(b=0,c=!1,f=0,g=a.length;g>f;f++)d=a[f],d>this.maxValue&&(this.maxValue=1.1*this.value,c=!0),this.gp[b].value=d,this.gp[b++].setOptions({maxValue:this.maxValue,angle:this.options.angle});return this.value=a[a.length-1],c?this.options.limitMax?void 0:AnimationUpdater.run():AnimationUpdater.run()},b.prototype.getAngle=function(a){return(1+this.options.angle)*Math.PI+(a-this.minValue)/(this.maxValue-this.minValue)*(1-2*this.options.angle)*Math.PI},b.prototype.getColorForPercentage=function(a,b){var c,d,e,f,g,h,i;if(0===a)c=this.percentColors[0].color;else for(c=this.percentColors[this.percentColors.length-1].color,e=h=0,i=this.percentColors.length-1;i>=0?i>=h:h>=i;e=i>=0?++h:--h)if(a<=this.percentColors[e].pct){b===!0?(g=this.percentColors[e-1],d=this.percentColors[e],f=(a-g.pct)/(d.pct-g.pct),c={r:Math.floor(g.color.r*(1-f)+d.color.r*f),g:Math.floor(g.color.g*(1-f)+d.color.g*f),b:Math.floor(g.color.b*(1-f)+d.color.b*f)}):c=this.percentColors[e].color;break}return"rgb("+[c.r,c.g,c.b].join(",")+")"},b.prototype.getColorForValue=function(a,b){var c;return c=(a-this.minValue)/(this.maxValue-this.minValue),this.getColorForPercentage(c,b)},b.prototype.render=function(){var a,b,c,d,e,f,g,h,i;for(e=this.canvas.width/2,d=this.canvas.height*(1-this.paddingBottom),a=this.getAngle(this.displayedValue),this.textField&&this.textField.render(this),this.ctx.lineCap="butt",void 0!==this.options.customFillStyle?b=this.options.customFillStyle(this):null!==this.percentColors?b=this.getColorForValue(this.displayedValue,!0):void 0!==this.options.colorStop?(b=0===this.options.gradientType?this.ctx.createRadialGradient(e,d,9,e,d,70):this.ctx.createLinearGradient(0,0,e,0),b.addColorStop(0,this.options.colorStart),b.addColorStop(1,this.options.colorStop)):b=this.options.colorStart,this.ctx.strokeStyle=b,this.ctx.beginPath(),this.ctx.arc(e,d,this.radius,(1+this.options.angle)*Math.PI,a,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(e,d,this.radius,a,(2-this.options.angle)*Math.PI,!1),this.ctx.stroke(),h=this.gp,i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(c.update(!0));return i},b}(e),d=function(a){function b(a){this.canvas=a,b.__super__.constructor.call(this),"undefined"!=typeof G_vmlCanvasManager&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.setOptions(),this.render()}return t(b,a),b.prototype.lineWidth=15,b.prototype.displayedValue=0,b.prototype.value=33,b.prototype.maxValue=80,b.prototype.minValue=0,b.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35},b.prototype.getAngle=function(a){return(1-this.options.angle)*Math.PI+(a-this.minValue)/(this.maxValue-this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI},b.prototype.setOptions=function(a){return null==a&&(a=null),b.__super__.setOptions.call(this,a),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.canvas.height/2-this.lineWidth/2,this},b.prototype.set=function(a){return this.value=a,this.value>this.maxValue&&(this.maxValue=1.1*this.value),AnimationUpdater.run()},b.prototype.render=function(){var a,b,c,d,e,f;return a=this.getAngle(this.displayedValue),f=this.canvas.width/2,c=this.canvas.height/2,this.textField&&this.textField.render(this),b=this.ctx.createRadialGradient(f,c,39,f,c,70),b.addColorStop(0,this.options.colorStart),b.addColorStop(1,this.options.colorStop),d=this.radius-this.lineWidth/2,e=this.radius+this.lineWidth/2,this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(f,c,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=b,this.ctx.beginPath(),this.ctx.arc(f,c,this.radius,(1-this.options.angle)*Math.PI,a,!1),this.ctx.stroke()},b}(e),f=function(a){function b(){return r=b.__super__.constructor.apply(this,arguments)}return t(b,a),b.prototype.strokeGradient=function(a,b,c,d){var e;return e=this.ctx.createRadialGradient(a,b,c,a,b,d),e.addColorStop(0,this.options.shadowColor),e.addColorStop(.12,this.options._orgStrokeColor),e.addColorStop(.88,this.options._orgStrokeColor),e.addColorStop(1,this.options.shadowColor),e},b.prototype.setOptions=function(a){var c,d,e,f;return null==a&&(a=null),b.__super__.setOptions.call(this,a),f=this.canvas.width/2,c=this.canvas.height/2,d=this.radius-this.lineWidth/2,e=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(f,c,d,e),this},b}(d),window.AnimationUpdater={elements:[],animId:null,addAll:function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(AnimationUpdater.elements.push(b));return e},add:function(a){return AnimationUpdater.elements.push(a)},run:function(){var a,b,c,d,e;for(a=!0,e=AnimationUpdater.elements,c=0,d=e.length;d>c;c++)b=e[c],b.update()&&(a=!1);return a?cancelAnimationFrame(AnimationUpdater.animId):AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}},window.Gauge=g,window.Donut=f,window.BaseDonut=d,window.TextRenderer=i}.call(this);var mod;mod=angular.module("infinite-scroll",[]),mod.directive("infiniteScroll",["$rootScope","$window","$timeout",function(a,b,c){return{link:function(d,e,f){var g,h,i,j;return b=angular.element(b),i=0,null!=f.infiniteScrollDistance&&d.$watch(f.infiniteScrollDistance,function(a){return i=parseInt(a,10)}),j=!0,g=!1,null!=f.infiniteScrollDisabled&&d.$watch(f.infiniteScrollDisabled,function(a){return j=!a,j&&g?(g=!1,h()):void 0}),h=function(){var c,h,k,l;return l=b.height()+b.scrollTop(),c=e.offset().top+e.height(),h=c-l,k=h<=b.height()*i,k&&j?a.$$phase?d.$eval(f.infiniteScroll):d.$apply(f.infiniteScroll):k?g=!0:void 0},b.on("scroll",h),d.$on("$destroy",function(){return b.off("scroll",h)}),c(function(){return f.infiniteScrollImmediateCheck?d.$eval(f.infiniteScrollImmediateCheck)?h():void 0:h()},0)}}}]),!function(a,b){"use strict";var c,d=a.document;c=function(){var c,e,f,g,h,i,j,k,l,m,n,o,p,q={},r={},s=!1,t={ENTER:13,ESC:27,SPACE:32},u=[];return r={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},p=function(){var a,c,e=!1,f=d.createElement("fakeelement"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(a in g)if(f.style[a]!==b){c=g[a],e=!0;break}return{type:c,supported:e}},c=function(a){return d.getElementById(a)},q={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:b,addListeners:function(a){var b,c,i,j,k,l="undefined"!=typeof f,m="undefined"!=typeof e,n="undefined"!=typeof o,p="",q=this;b=function(b){return"undefined"!=typeof b.preventDefault&&b.preventDefault(),i(b),"undefined"!=typeof o&&(p=o.value),"function"==typeof a&&("undefined"!=typeof o?a(!0,p):a(!0)),!1},c=function(b){return"undefined"!=typeof b.preventDefault&&b.preventDefault(),i(b),"function"==typeof a&&a(!1),!1},i=function(){q.hide(),q.unbind(d.body,"keyup",j),q.unbind(g,"focus",k),l&&q.unbind(f,"click",b),m&&q.unbind(e,"click",c)},j=function(a){var d=a.keyCode;(d===t.SPACE&&!n||n&&d===t.ENTER)&&b(a),d===t.ESC&&m&&c(a)},k=function(){n?o.focus():!m||q.buttonReverse?f.focus():e.focus()},this.bind(g,"focus",k),this.bind(h,"focus",k),l&&this.bind(f,"click",b),m&&this.bind(e,"click",c),this.bind(d.body,"keyup",j),this.transition.supported||this.setFocus()},bind:function(a,b,c){"function"==typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},handleErrors:function(){if("undefined"!=typeof a.onerror){var b=this;return a.onerror=function(a,c,d){b.error("["+a+" on line "+d+" of "+c+"]",0)},!0}return!1},appendButtons:function(a,b){return this.buttonReverse?b+a:a+b},build:function(a){var b="",c=a.type,d=a.message,e=a.cssClass||"";switch(b+='<div class="alertify-dialog">',b+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===q.buttonFocus&&(b+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===c&&(b+='<div id="alertify-form">'),b+='<article class="alertify-inner">',b+=r.message.replace("{{message}}",d),"prompt"===c&&(b+=r.input),b+=r.buttons.holder,b+="</article>","prompt"===c&&(b+="</div>"),b+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',b+="</div>",c){case"confirm":b=b.replace("{{buttons}}",this.appendButtons(r.buttons.cancel,r.buttons.ok)),b=b.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":b=b.replace("{{buttons}}",this.appendButtons(r.buttons.cancel,r.buttons.submit)),b=b.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":b=b.replace("{{buttons}}",r.buttons.ok),b=b.replace("{{ok}}",this.labels.ok)}return l.className="alertify alertify-"+c+" "+e,k.className="alertify-cover",b},close:function(a,b){var c,d,e=b&&!isNaN(b)?+b:this.delay,f=this;this.bind(a,"click",function(){c(a)}),d=function(a){a.stopPropagation(),f.unbind(this,f.transition.type,d),m.removeChild(this),m.hasChildNodes()||(m.className+=" alertify-logs-hidden")},c=function(a){"undefined"!=typeof a&&a.parentNode===m&&(f.transition.supported?(f.bind(a,f.transition.type,d),a.className+=" alertify-log-hide"):(m.removeChild(a),m.hasChildNodes()||(m.className+=" alertify-logs-hidden")))},0!==b&&setTimeout(function(){c(a)},e)},dialog:function(a,b,c,e,f){j=d.activeElement;var g=function(){m&&null!==m.scrollTop&&k&&null!==k.scrollTop||g()};if("string"!=typeof a)throw new Error("message must be a string");if("string"!=typeof b)throw new Error("type must be a string");if("undefined"!=typeof c&&"function"!=typeof c)throw new Error("fn must be a function");return this.init(),g(),u.push({type:b,message:a,callback:c,placeholder:e,cssClass:f}),s||this.setup(),this},extend:function(a){if("string"!=typeof a)throw new Error("extend method must have exactly one paramter");return function(b,c){return this.log(b,a,c),this}},hide:function(){var a,b=this;u.splice(0,1),u.length>0?this.setup(!0):(s=!1,a=function(c){c.stopPropagation(),b.unbind(l,b.transition.type,a)},this.transition.supported?(this.bind(l,this.transition.type,a),l.className="alertify alertify-hide alertify-hidden"):l.className="alertify alertify-hide alertify-hidden alertify-isHidden",k.className="alertify-cover alertify-cover-hidden",j.focus())},init:function(){d.createElement("nav"),d.createElement("article"),d.createElement("section"),null==c("alertify-cover")&&(k=d.createElement("div"),k.setAttribute("id","alertify-cover"),k.className="alertify-cover alertify-cover-hidden",d.body.appendChild(k)),null==c("alertify")&&(s=!1,u=[],l=d.createElement("section"),l.setAttribute("id","alertify"),l.className="alertify alertify-hidden",d.body.appendChild(l)),null==c("alertify-logs")&&(m=d.createElement("section"),m.setAttribute("id","alertify-logs"),m.className="alertify-logs alertify-logs-hidden",d.body.appendChild(m)),d.body.setAttribute("tabindex","0"),this.transition=p()},log:function(a,b,c){var d=function(){m&&null!==m.scrollTop||d()};return this.init(),d(),m.className="alertify-logs",this.notify(a,b,c),this},notify:function(a,b,c){var e=d.createElement("article");e.className="alertify-log"+("string"==typeof b&&""!==b?" alertify-log-"+b:""),e.innerHTML=a,m.appendChild(e),setTimeout(function(){e.className=e.className+" alertify-log-show"},50),this.close(e,c)},set:function(a){var b;if("object"!=typeof a&&a instanceof Array)throw new Error("args must be an object");for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},setFocus:function(){o?(o.focus(),o.select()):i.focus()},setup:function(a){var d,j=u[0],k=this;s=!0,d=function(a){a.stopPropagation(),k.setFocus(),k.unbind(l,k.transition.type,d)},this.transition.supported&&!a&&this.bind(l,this.transition.type,d),l.innerHTML=this.build(j),g=c("alertify-resetFocus"),h=c("alertify-resetFocusBack"),f=c("alertify-ok")||b,e=c("alertify-cancel")||b,i="cancel"===q.buttonFocus?e:"none"===q.buttonFocus?c("alertify-noneFocus"):f,o=c("alertify-text")||b,n=c("alertify-form")||b,"string"==typeof j.placeholder&&""!==j.placeholder&&(o.value=j.placeholder),a&&this.setFocus(),this.addListeners(j.callback)},unbind:function(a,b,c){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}},{alert:function(a,b,c){return q.dialog(a,"alert",b,"",c),this},confirm:function(a,b,c){return q.dialog(a,"confirm",b,"",c),this},extend:q.extend,init:q.init,log:function(a,b,c){return q.log(a,b,c),this},prompt:function(a,b,c,d){return q.dialog(a,"prompt",b,c,d),this},success:function(a,b){return q.log(a,"success",b),this},error:function(a,b){return q.log(a,"error",b),this},set:function(a){q.set(a)},labels:q.labels,debug:q.handleErrors}},"function"==typeof define?define([],function(){return new c}):"undefined"==typeof a.alertify&&(a.alertify=new c)}(this),this.msgpack||function(a){function b(a,b){s=0;var c=d([],a,0);return s?!1:b?f(c):c}function c(a){return q="string"==typeof a?j(a):a,r=-1,e()}function d(a,b,c){var e,f,g,h,i,j,k,l,m,n;if(null==b)a.push(192);else if(b===!1)a.push(194);else if(b===!0)a.push(195);else switch(typeof b){case"number":b!==b?a.push(203,255,255,255,255,255,255,255,255):1/0===b?a.push(203,127,240,0,0,0,0,0,0):Math.floor(b)===b?0>b?b>=-32?a.push(224+b+32):b>-128?a.push(208,b+256):b>-32768?(b+=65536,a.push(209,b>>8,255&b)):b>-2147483648?(b+=4294967296,a.push(210,b>>>24,b>>16&255,b>>8&255,255&b)):(j=Math.floor(b/4294967296),k=4294967295&b,a.push(211,j>>24&255,j>>16&255,j>>8&255,255&j,k>>24&255,k>>16&255,k>>8&255,255&k)):128>b?a.push(b):256>b?a.push(204,b):65536>b?a.push(205,b>>8,255&b):4294967296>b?a.push(206,b>>>24,b>>16&255,b>>8&255,255&b):(j=Math.floor(b/4294967296),k=4294967295&b,a.push(207,j>>24&255,j>>16&255,j>>8&255,255&j,k>>24&255,k>>16&255,k>>8&255,255&k)):(l=0>b,l&&(b*=-1),m=Math.log(b)/.6931471805599453+1023|0,n=b*Math.pow(2,1075-m),k=4294967295&n,l&&(m|=2048),j=n/4294967296&1048575|m<<20,a.push(203,j>>24&255,j>>16&255,j>>8&255,255&j,k>>24&255,k>>16&255,k>>8&255,255&k));break;case"string":for(g=b.length,i=a.length,a.push(0),f=0;g>f;++f)h=b.charCodeAt(f),128>h?a.push(127&h):2048>h?a.push(h>>>6&31|192,63&h|128):65536>h&&a.push(h>>>12&15|224,h>>>6&63|128,63&h|128);e=a.length-i-1,32>e?a[i]=160+e:65536>e?a.splice(i,1,218,e>>8,255&e):4294967296>e&&a.splice(i,1,219,e>>>24,e>>16&255,e>>8&255,255&e);break;default:if(++c>=v)return s=1,a=[];if(t(b))for(e=b.length,16>e?a.push(144+e):65536>e?a.push(220,e>>8,255&e):4294967296>e&&a.push(221,e>>>24,e>>16&255,e>>8&255,255&e),f=0;e>f;++f)d(a,b[f],c);else{i=a.length,a.push(0),e=0;for(f in b)++e,d(a,f,c),d(a,b[f],c);16>e?a[i]=128+e:65536>e?a.splice(i,1,222,e>>8,255&e):4294967296>e&&a.splice(i,1,223,e>>>24,e>>16&255,e>>8&255,255&e)}}return a}function e(){var a,b,c,d,g,h,i,j,k,l=0,m=q,n=m[++r];if(n>=224)return n-256;if(192>n){if(128>n)return n;144>n?(l=n-128,n=128):160>n?(l=n-144,n=144):(l=n-160,n=160)}switch(n){case 192:return null;case 194:return!1;case 195:return!0;case 202:return l=16777216*m[++r]+(m[++r]<<16)+(m[++r]<<8)+m[++r],g=2147483648&l,h=l>>23&255,i=8388607&l,l&&2147483648!==l?255===h?i?0/0:1/0:(g?-1:1)*(8388608|i)*Math.pow(2,h-127-23):0;case 203:return l=16777216*m[++r]+(m[++r]<<16)+(m[++r]<<8)+m[++r],g=2147483648&l,h=l>>20&2047,i=1048575&l,l&&2147483648!==l?2047===h?(r+=4,i?0/0:1/0):(l=16777216*m[++r]+(m[++r]<<16)+(m[++r]<<8)+m[++r],(g?-1:1)*((1048576|i)*Math.pow(2,h-1023-20)+l*Math.pow(2,h-1023-52))):(r+=4,0);case 207:return l=16777216*m[++r]+(m[++r]<<16)+(m[++r]<<8)+m[++r],4294967296*l+16777216*m[++r]+(m[++r]<<16)+(m[++r]<<8)+m[++r];case 206:l+=16777216*m[++r]+(m[++r]<<16);case 205:l+=m[++r]<<8;case 204:return l+m[++r];case 211:return l=m[++r],128&l?-1*(72057594037927940*(255^l)+281474976710656*(255^m[++r])+1099511627776*(255^m[++r])+4294967296*(255^m[++r])+16777216*(255^m[++r])+65536*(255^m[++r])+256*(255^m[++r])+(255^m[++r])+1):72057594037927940*l+281474976710656*m[++r]+1099511627776*m[++r]+4294967296*m[++r]+16777216*m[++r]+65536*m[++r]+256*m[++r]+m[++r];case 210:return l=16777216*m[++r]+(m[++r]<<16)+(m[++r]<<8)+m[++r],2147483648>l?l:l-4294967296;case 209:return l=(m[++r]<<8)+m[++r],32768>l?l:l-65536;case 208:return l=m[++r],128>l?l:l-256;case 219:l+=16777216*m[++r]+(m[++r]<<16);case 218:l+=(m[++r]<<8)+m[++r];case 160:for(j=[],b=r,c=b+l;c>b;)d=m[++b],j.push(128>d?d:224>d?(31&d)<<6|63&m[++b]:(15&d)<<12|(63&m[++b])<<6|63&m[++b]);return r=b,j.length<10240?u.apply(null,j):f(j);case 223:l+=16777216*m[++r]+(m[++r]<<16);case 222:l+=(m[++r]<<8)+m[++r];case 128:for(k={};l--;){for(a=m[++r]-160,j=[],b=r,c=b+a;c>b;)d=m[++b],j.push(128>d?d:224>d?(31&d)<<6|63&m[++b]:(15&d)<<12|(63&m[++b])<<6|63&m[++b]);r=b,k[u.apply(null,j)]=e()}return k;case 221:l+=16777216*m[++r]+(m[++r]<<16);case 220:l+=(m[++r]<<8)+m[++r];case 144:for(j=[];l--;)j.push(e());return j}}function f(a){try{return u.apply(this,a)}catch(b){}for(var c=[],d=0,e=a.length,f=o;e>d;++d)c[d]=f[a[d]];return c.join("")}function g(a,b,c){b.method="GET",b.binary=!0,i(a,b,c)}function h(c,d,e){if(d.method="PUT",d.binary=!0,d.worker&&a.Worker){var f=new Worker(msgpack.worker);f.onmessage=function(a){d.data=a.data,i(c,d,e)},f.postMessage({method:"pack",data:d.data})}else d.data=l(b(d.data)),i(c,d,e)}function i(b,d,e){function f(){if(4===s.readyState){var b,f,g,i=s.status,l={status:i,ok:i>=200&&300>i};if(!t++){if("PUT"===n)b=l.ok?s.responseText:"";else if(l.ok){if(d.worker&&a.Worker)return f=new Worker(msgpack.worker),f.onmessage=function(a){e(a.data,d,l)},f.postMessage({method:"unpack",data:s.responseText}),h(),void 0;g=m?k(s):j(s.responseText),b=c(g)}q&&q(s,d,l),e(b,d,l),h()}}}function g(a,b){if(!t++){var c={status:b||400,ok:!1};q&&q(s,d,c),e(null,d,c),h(a)}}function h(b){b&&s&&s.abort&&s.abort(),l&&(clearTimeout(l),l=0),s=null,a.addEventListener&&a.removeEventListener("beforeunload",g,!1)}var i,l=0,n=d.method||"GET",o=d.header||{},p=d.before,q=d.after,r=d.data||null,s=a.XMLHttpRequest?new XMLHttpRequest:a.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null,t=0,u="overrideMimeType",v="setRequestHeader",w="GET"===n&&d.binary;try{s.onreadystatechange=f,s.open(n,b,!0),p&&p(s,d),w&&s[u]&&s[u]("text/plain; charset=x-user-defined"),r&&s[v]("Content-Type","application/x-www-form-urlencoded");for(i in o)s[v](i,o[i]);a.addEventListener&&a.addEventListener("beforeunload",g,!1),s.send(r),l=setTimeout(function(){g(1,408)},1e3*(d.timeout||10))}catch(x){g(0,400)}}function j(a){var b,c,d=[],e=n,f=a.split(""),g=-1;for(c=f.length,b=c%8;b--;)++g,d[g]=e[f[g]];for(b=c>>3;b--;)d.push(e[f[++g]],e[f[++g]],e[f[++g]],e[f[++g]],e[f[++g]],e[f[++g]],e[f[++g]],e[f[++g]]);return d}function k(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=[],o="charCodeAt",p=-1;for(m=vblen(a),b=vbstr(a),d=Math.ceil(m/2),c=d%8;c--;)e=b[o](++p),n.push(255&e,e>>8);for(c=d>>3;c--;)e=b[o](++p),f=b[o](++p),g=b[o](++p),h=b[o](++p),i=b[o](++p),j=b[o](++p),k=b[o](++p),l=b[o](++p),n.push(255&e,e>>8,255&f,f>>8,255&g,g>>8,255&h,h>>8,255&i,i>>8,255&j,j>>8,255&k,k>>8,255&l,l>>8);return m%2&&n.pop(),n}function l(b){var c=[],d=0,e=-1,f=b.length,g=[0,2,1][b.length%3],h=o,i=p;if(a.btoa){for(;f>e;)c.push(h[b[++e]]);return btoa(c.join(""))}for(--f;f>e;)d=b[++e]<<16|b[++e]<<8|b[++e],c.push(i[d>>18&63],i[d>>12&63],i[d>>6&63],i[63&d]);return g>1&&(c[c.length-2]="="),g>0&&(c[c.length-1]="="),c.join("")}a.msgpack={pack:b,unpack:c,worker:"msgpack.js",upload:h,download:g};var m=/MSIE/.test(navigator.userAgent),n={},o={},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),q=[],r=0,s=0,t=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},u=String.fromCharCode,v=512;self.importScripts&&(onmessage=function(a){"pack"===a.data.method?postMessage(l(b(a.data.data))):postMessage(c(a.data.data))}),function(){for(var a,b=0;256>b;++b)a=u(b),n[a]=b,o[b]=a;for(b=128;256>b;++b)n[u(63232+b)]=b}(),m&&document.write('<script type="text/vbscript">Function vblen(b)vblen=LenB(b.responseBody)End Function\nFunction vbstr(b)vbstr=CStr(b.responseBody)+chr(0)End Function</script>')}(this),function(a){"use strict";var b=function(a,b){this.init("simplecolorpicker",a,b)};b.prototype={constructor:b,init:function(b,c,d){this.type=b,this.$select=a(c),this.options=a.extend({},a.fn.simplecolorpicker.defaults,d),this.$select.hide();var e="&nbsp;&nbsp;&nbsp;&nbsp;",f="";if(a("option",this.$select).each(function(){var b=a(this),c=b.val(),d=b.text(),g="";b.attr("selected")&&(g='class="selected"'),f+="<div "+g+' title="'+d+'" style="background-color: '+c+';" role="button" tabindex="0">'+e+"</div>"}),this.options.picker){var g=this.$select.find("option:selected").text(),h=this.$select.val();this.$icon=a('<span class="simplecolorpicker icon btn btn-xs" title="'+g+'" style="background-image: none; background-color: '+h+';" role="button" tabindex="0">Color</span>').insertAfter(this.$select),this.$icon.on("click."+this.type,a.proxy(this.showPicker,this)),this.$picker=a('<span class="simplecolorpicker picker"></span>').appendTo(document.body),this.$picker.html(f),this.$picker.on("click."+this.type,a.proxy(this.click,this)),a(document).on("mousedown."+this.type,a.proxy(this.hidePicker,this)),this.$picker.on("mousedown."+this.type,a.proxy(this.mousedown,this))}else this.$inline=a('<span class="simplecolorpicker inline"></span>').insertAfter(this.$select),this.$inline.html(f),this.$inline.on("click."+this.type,a.proxy(this.click,this))},showPicker:function(){var a=16,b=this.$icon.offset();this.$picker.css({left:b.left+this.$icon.width()/2-a,top:b.top+this.$icon.outerHeight()}),this.$picker.show(this.options.delay)},hidePicker:function(){this.$picker.hide(this.options.delay)},click:function(b){var c=a(b.target);if(1===c.length&&"div"===c[0].nodeName.toLowerCase()){var d=c.css("background-color"),e=c.attr("title");c.siblings().removeClass("selected"),c.addClass("selected"),this.options.picker&&(this.$icon.css("background-color",d),this.$icon.attr("title",e),this.hidePicker()),this.$select.val(this.rgb2hex(d)).change()}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},rgb2hex:function(a){function b(a){return("0"+parseInt(a,10).toString(16)).slice(-2)}var c=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return null===c?a:"#"+b(c[1])+b(c[2])+b(c[3])},destroy:function(){this.options.picker?(this.$icon.off("."+this.type),this.$icon.remove(),this.$picker.off("."+this.type),this.$picker.remove(),a(document).off("."+this.type)):(this.$inline.off("."+this.type),this.$inline.remove()),this.$select.removeData(this.type),this.$select.show()}},a.fn.simplecolorpicker=function(c){return this.each(function(){var d=a(this),e=d.data("simplecolorpicker"),f="object"==typeof c&&c;void 0===e&&d.data("simplecolorpicker",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.simplecolorpicker.defaults={delay:0,picker:!1}}(jQuery),angular.module("fifoApp").factory("$modal",["$rootScope","$compile","$http","$timeout","$q","$templateCache",function(a,b,c,d,e,f){var g=function(g){function h(g){var h=angular.extend({show:!0},{},g),i=h.scope?h.scope:a.$new(),j=h.template;return e.when(f.get(j)||c.get(j,{cache:!0}).then(function(a){return a.data})).then(function(a){var c=j.replace(".html","").replace(/[\/|\.|:]/g,"-")+"-"+i.$id,e=$('<div class="modal hidenono" tabindex="-1"></div>').attr("id",c).addClass("fadenono").html(a);
return h.modalClass&&e.addClass(h.modalClass),$("body").append(e),d(function(){b(e)(i)}),i.$modal=function(a){e.modal(a)},angular.forEach(["show","hide"],function(a){i[a]=function(){e.modal(a)}}),i.dismiss=i.hide,angular.forEach(["show","shown","hide","hidden"],function(a){e.on(a,function(b){i.$emit("modal-"+a,b)})}),e.on("shown",function(){$("input[autofocus], textarea[autofocus]",e).first().trigger("focus")}),e.on("hidden",function(){h.persist||i.$destroy()}),i.$on("$destroy",function(){e.remove()}),e.modal(h),e})}return new h(g)};return g}]).directive("bsModal",["$q","$modal",function(a,b){return{restrict:"A",scope:!0,link:function(c,d,e){var f={template:c.$eval(e.bsModal),persist:!0,show:!1,scope:c};angular.forEach(["modalClass","backdrop","keyboard"],function(a){angular.isDefined(e[a])&&(f[a]=e[a])}),a.when(b(f)).then(function(a){d.attr("data-target","#"+a.attr("id")).attr("data-toggle","modal")})}}}]);